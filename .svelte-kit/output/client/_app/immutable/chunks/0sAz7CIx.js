import"./DsnmJJEf.js";import{D as ot,t as ui,aG as di,b4 as fi,ad as rr,a2 as Xe,ae as hi,a5 as gi,b5 as yi,Y as j,a_ as bt,a0 as mi,P as re,d as u,aS as p,ab as Ye,R as G,Z as $,V as le,ac as At,W as oe,a$ as Dt,aa as de,T as ce,Q as ue,X as Fe,b2 as hn,b6 as ir,a1 as qe,S as se,O as A,aZ as Ve,aT as pi,b7 as vi,b8 as zn,aB as sr,b9 as Jt,ba as Gn,a8 as Be,bb as ge,b0 as mo,b3 as _e,bc as wi,_ as po}from"./BkwaiKXi.js";import{p as R,r as Tt,b as It,c as Un,s as xi}from"./Ud_oaDXL.js";import{a as Je,C as Qn,S as Jn,s as ae,b as He}from"./CvlBOBPg.js";import{i as be}from"./BnpdicBt.js";import{s as gn,c as jn}from"./vE4479mo.js";import{e as $n}from"./C9UW2KHr.js";import{i as _i}from"./C3nM0Ame.js";var bi="font-weight: bold",Si="font-weight: normal";function vo(e){ot?console.warn(`%c[svelte] state_snapshot_uncloneable
%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,bi,Si):console.warn("https://svelte.dev/e/state_snapshot_uncloneable")}const Ei=[];function ar(e,t=!1,n=!1){if(ot&&!t){const o=[],r=xt(e,new Map,"",o,null,n);if(o.length===1&&o[0]==="")vo();else if(o.length>0){const i=o.length>10?o.slice(0,7):o.slice(0,10),s=o.length-i.length;let a=i.map(l=>`- <value>${l}`).join(`
`);s>0&&(a+=`
- ...and ${s} more`),vo(a)}return r}return xt(e,new Map,"",Ei,null,n)}function xt(e,t,n,o,r=null,i=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ui(e)){var a=Array(e.length);t.set(e,a),r!==null&&t.set(r,a);for(var l=0;l<e.length;l+=1){var c=e[l];l in e&&(a[l]=xt(c,t,ot?`${n}[${l}]`:n,o,null,i))}return a}if(di(e)===fi){a={},t.set(e,a),r!==null&&t.set(r,a);for(var d in e)a[d]=xt(e[d],t,ot?`${n}.${d}`:n,o,null,i);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!i)return xt(e.toJSON(),t,ot?`${n}.toJSON()`:n,o,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return ot&&o.push(n),e}}function pe(e,t,n){rr(()=>{var o=Xe(()=>t(e,n?.())||{});if(n&&o?.update){var r=!1,i={};hi(()=>{var s=n();gi(s),r&&yi(i,s)&&(i=s,o.update(s))}),r=!0}if(o?.destroy)return()=>o.destroy()})}class eo{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var o=this.#e.get(t)||new Set;return o.add(n),this.#e.set(t,o),this.#o().observe(t,this.#n),()=>{var r=this.#e.get(t);r.delete(n),r.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#o(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){eo.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var ki=new eo({box:"border-box"});function wo(e,t,n){var o=ki.observe(e,()=>n(e[t]));rr(()=>(Xe(()=>n(e[t])),o))}var Ni={value:()=>{}};function yn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wt(n)}function Wt(e){this._=e}function Pi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Wt.prototype=yn.prototype={constructor:Wt,on:function(e,t){var n=this._,o=Pi(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Ci(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=xo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=xo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Ci(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function xo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Ni,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var On="http://www.w3.org/1999/xhtml";const _o={svg:"http://www.w3.org/2000/svg",xhtml:On,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),_o.hasOwnProperty(t)?{space:_o[t],local:e}:e}function Mi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===On&&t.documentElement.namespaceURI===On?t.createElement(e):t.createElementNS(n,e)}}function Ai(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lr(e){var t=mn(e);return(t.local?Ai:Mi)(t)}function Di(){}function to(e){return e==null?Di:function(){return this.querySelector(e)}}function Ti(e){typeof e!="function"&&(e=to(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,c,d=0;d<s;++d)(l=i[d])&&(c=e.call(l,l.__data__,d,i))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new xe(o,this._parents)}function Ii(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zi(){return[]}function cr(e){return e==null?zi:function(){return this.querySelectorAll(e)}}function Oi(e){return function(){return Ii(e.apply(this,arguments))}}function Hi(e){typeof e=="function"?e=Oi(e):e=cr(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(o.push(e.call(l,l.__data__,c,s)),r.push(l));return new xe(o,r)}function ur(e){return function(){return this.matches(e)}}function dr(e){return function(t){return t.matches(e)}}var Ri=Array.prototype.find;function Vi(e){return function(){return Ri.call(this.children,e)}}function Li(){return this.firstElementChild}function Ki(e){return this.select(e==null?Li:Vi(typeof e=="function"?e:dr(e)))}var Bi=Array.prototype.filter;function Yi(){return Array.from(this.children)}function Xi(e){return function(){return Bi.call(this.children,e)}}function Zi(e){return this.selectAll(e==null?Yi:Xi(typeof e=="function"?e:dr(e)))}function Fi(e){typeof e!="function"&&(e=ur(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new xe(o,this._parents)}function fr(e){return new Array(e.length)}function Wi(){return new xe(this._enter||this._groups.map(fr),this._parents)}function jt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jt.prototype={constructor:jt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qi(e){return function(){return e}}function Gi(e,t,n,o,r,i){for(var s=0,a,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new jt(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Ui(e,t,n,o,r,i,s){var a,l,c=new Map,d=t.length,g=i.length,f=new Array(d),y;for(a=0;a<d;++a)(l=t[a])&&(f[a]=y=s.call(l,l.__data__,a,t)+"",c.has(y)?r[a]=l:c.set(y,l));for(a=0;a<g;++a)y=s.call(e,i[a],a,i)+"",(l=c.get(y))?(o[a]=l,l.__data__=i[a],c.delete(y)):n[a]=new jt(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&c.get(f[a])===l&&(r[a]=l)}function Qi(e){return e.__data__}function Ji(e,t){if(!arguments.length)return Array.from(this,Qi);var n=t?Ui:Gi,o=this._parents,r=this._groups;typeof e!="function"&&(e=qi(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var d=o[c],g=r[c],f=g.length,y=ji(e.call(d,d&&d.__data__,c,o)),_=y.length,w=a[c]=new Array(_),k=s[c]=new Array(_),E=l[c]=new Array(f);n(d,g,w,k,E,y,t);for(var C=0,T=0,S,H;C<_;++C)if(S=w[C]){for(C>=T&&(T=C+1);!(H=k[T])&&++T<_;);S._next=H||null}}return s=new xe(s,o),s._enter=a,s._exit=l,s}function ji(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $i(){return new xe(this._exit||this._groups.map(fr),this._parents)}function es(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ts(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var c=n[l],d=o[l],g=c.length,f=a[l]=new Array(g),y,_=0;_<g;++_)(y=c[_]||d[_])&&(f[_]=y);for(;l<r;++l)a[l]=n[l];return new xe(a,this._parents)}function ns(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function os(e){e||(e=rs);function t(g,f){return g&&f?e(g.__data__,f.__data__):!g-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(t)}return new xe(r,this._parents).order()}function rs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function is(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ss(){return Array.from(this)}function as(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function ls(){let e=0;for(const t of this)++e;return e}function cs(){return!this.node()}function us(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function ds(e){return function(){this.removeAttribute(e)}}function fs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hs(e,t){return function(){this.setAttribute(e,t)}}function gs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ys(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ms(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ps(e,t){var n=mn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fs:ds:typeof t=="function"?n.local?ms:ys:n.local?gs:hs)(n,t))}function hr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vs(e){return function(){this.style.removeProperty(e)}}function ws(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xs(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function _s(e,t,n){return arguments.length>1?this.each((t==null?vs:typeof t=="function"?xs:ws)(e,t,n??"")):lt(this.node(),e)}function lt(e,t){return e.style.getPropertyValue(t)||hr(e).getComputedStyle(e,null).getPropertyValue(t)}function bs(e){return function(){delete this[e]}}function Ss(e,t){return function(){this[e]=t}}function Es(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ks(e,t){return arguments.length>1?this.each((t==null?bs:typeof t=="function"?Es:Ss)(e,t)):this.node()[e]}function gr(e){return e.trim().split(/^|\s+/)}function no(e){return e.classList||new yr(e)}function yr(e){this._node=e,this._names=gr(e.getAttribute("class")||"")}yr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mr(e,t){for(var n=no(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function pr(e,t){for(var n=no(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ns(e){return function(){mr(this,e)}}function Ps(e){return function(){pr(this,e)}}function Cs(e,t){return function(){(t.apply(this,arguments)?mr:pr)(this,e)}}function Ms(e,t){var n=gr(e+"");if(arguments.length<2){for(var o=no(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cs:t?Ns:Ps)(n,t))}function As(){this.textContent=""}function Ds(e){return function(){this.textContent=e}}function Ts(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Is(e){return arguments.length?this.each(e==null?As:(typeof e=="function"?Ts:Ds)(e)):this.node().textContent}function zs(){this.innerHTML=""}function Os(e){return function(){this.innerHTML=e}}function Hs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rs(e){return arguments.length?this.each(e==null?zs:(typeof e=="function"?Hs:Os)(e)):this.node().innerHTML}function Vs(){this.nextSibling&&this.parentNode.appendChild(this)}function Ls(){return this.each(Vs)}function Ks(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bs(){return this.each(Ks)}function Ys(e){var t=typeof e=="function"?e:lr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Xs(){return null}function Zs(e,t){var n=typeof e=="function"?e:lr(e),o=t==null?Xs:typeof t=="function"?t:to(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Fs(){var e=this.parentNode;e&&e.removeChild(this)}function Ws(){return this.each(Fs)}function qs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Us(e){return this.select(e?Gs:qs)}function Qs(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Js(e){return function(t){e.call(this,t,this.__data__)}}function js(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function $s(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function ea(e,t,n){return function(){var o=this.__on,r,i=Js(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ta(e,t,n){var o=js(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(r=0,d=a[l];r<i;++r)if((s=o[r]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?ea:$s,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function vr(e,t,n){var o=hr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function na(e,t){return function(){return vr(this,e,t)}}function oa(e,t){return function(){return vr(this,e,t.apply(this,arguments))}}function ra(e,t){return this.each((typeof t=="function"?oa:na)(e,t))}function*ia(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var wr=[null];function xe(e,t){this._groups=e,this._parents=t}function zt(){return new xe([[document.documentElement]],wr)}function sa(){return this}xe.prototype=zt.prototype={constructor:xe,select:Ti,selectAll:Hi,selectChild:Ki,selectChildren:Zi,filter:Fi,data:Ji,enter:Wi,exit:$i,join:es,merge:ts,selection:sa,order:ns,sort:os,call:is,nodes:ss,node:as,size:ls,empty:cs,each:us,attr:ps,style:_s,property:ks,classed:Ms,text:Is,html:Rs,raise:Ls,lower:Bs,append:Ys,insert:Zs,remove:Ws,clone:Us,datum:Qs,on:ta,dispatch:ra,[Symbol.iterator]:ia};function Se(e){return typeof e=="string"?new xe([[document.querySelector(e)]],[document.documentElement]):new xe([[e]],wr)}function aa(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=aa(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const la={passive:!1},St={capture:!0,passive:!1};function kn(e){e.stopImmediatePropagation()}function it(e){e.preventDefault(),e.stopImmediatePropagation()}function xr(e){var t=e.document.documentElement,n=Se(e).on("dragstart.drag",it,St);"onselectstart"in t?n.on("selectstart.drag",it,St):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _r(e,t){var n=e.document.documentElement,o=Se(e).on("dragstart.drag",null);t&&(o.on("click.drag",it,St),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kt=e=>()=>e;function Hn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Hn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ca(e){return!e.ctrlKey&&!e.button}function ua(){return this.parentNode}function da(e,t){return t??{x:e.x,y:e.y}}function fa(){return navigator.maxTouchPoints||"ontouchstart"in this}function ha(){var e=ca,t=ua,n=da,o=fa,r={},i=yn("start","drag","end"),s=0,a,l,c,d,g=0;function f(S){S.on("mousedown.drag",y).filter(o).on("touchstart.drag",k).on("touchmove.drag",E,la).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(S,H){if(!(d||!e.call(this,S,H))){var N=T(this,t.call(this,S,H),S,H,"mouse");N&&(Se(S.view).on("mousemove.drag",_,St).on("mouseup.drag",w,St),xr(S.view),kn(S),c=!1,a=S.clientX,l=S.clientY,N("start",S))}}function _(S){if(it(S),!c){var H=S.clientX-a,N=S.clientY-l;c=H*H+N*N>g}r.mouse("drag",S)}function w(S){Se(S.view).on("mousemove.drag mouseup.drag",null),_r(S.view,c),it(S),r.mouse("end",S)}function k(S,H){if(e.call(this,S,H)){var N=S.changedTouches,z=t.call(this,S,H),K=N.length,V,U;for(V=0;V<K;++V)(U=T(this,z,S,H,N[V].identifier,N[V]))&&(kn(S),U("start",S,N[V]))}}function E(S){var H=S.changedTouches,N=H.length,z,K;for(z=0;z<N;++z)(K=r[H[z].identifier])&&(it(S),K("drag",S,H[z]))}function C(S){var H=S.changedTouches,N=H.length,z,K;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),z=0;z<N;++z)(K=r[H[z].identifier])&&(kn(S),K("end",S,H[z]))}function T(S,H,N,z,K,V){var U=i.copy(),Q=Ce(V||N,H),m,b,h;if((h=n.call(S,new Hn("beforestart",{sourceEvent:N,target:f,identifier:K,active:s,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:U}),z))!=null)return m=h.x-Q[0]||0,b=h.y-Q[1]||0,function x(v,P,M){var D=Q,I;switch(v){case"start":r[K]=x,I=s++;break;case"end":delete r[K],--s;case"drag":Q=Ce(M||P,H),I=s;break}U.call(v,S,new Hn(v,{sourceEvent:P,subject:h,target:f,identifier:K,active:I,x:Q[0]+m,y:Q[1]+b,dx:Q[0]-D[0],dy:Q[1]-D[1],dispatch:U}),z)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Kt(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:Kt(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Kt(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Kt(!!S),f):o},f.on=function(){var S=i.on.apply(i,arguments);return S===i?f:S},f.clickDistance=function(S){return arguments.length?(g=(S=+S)*S,f):Math.sqrt(g)},f}function oo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function br(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ot(){}var Et=.7,$t=1/Et,st="\\s*([+-]?\\d+)\\s*",kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ga=/^#([0-9a-f]{3,8})$/,ya=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),ma=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),pa=new RegExp(`^rgba\\(${st},${st},${st},${kt}\\)$`),va=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${kt}\\)$`),wa=new RegExp(`^hsl\\(${kt},${Ae},${Ae}\\)$`),xa=new RegExp(`^hsla\\(${kt},${Ae},${Ae},${kt}\\)$`),bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oo(Ot,Ge,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:So,formatHex:So,formatHex8:_a,formatHsl:ba,formatRgb:Eo,toString:Eo});function So(){return this.rgb().formatHex()}function _a(){return this.rgb().formatHex8()}function ba(){return Sr(this).formatHsl()}function Eo(){return this.rgb().formatRgb()}function Ge(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ga.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ko(t):n===3?new ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ya.exec(e))?new ve(t[1],t[2],t[3],1):(t=ma.exec(e))?new ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pa.exec(e))?Bt(t[1],t[2],t[3],t[4]):(t=va.exec(e))?Bt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wa.exec(e))?Co(t[1],t[2]/100,t[3]/100,1):(t=xa.exec(e))?Co(t[1],t[2]/100,t[3]/100,t[4]):bo.hasOwnProperty(e)?ko(bo[e]):e==="transparent"?new ve(NaN,NaN,NaN,0):null}function ko(e){return new ve(e>>16&255,e>>8&255,e&255,1)}function Bt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ve(e,t,n,o)}function Sa(e){return e instanceof Ot||(e=Ge(e)),e?(e=e.rgb(),new ve(e.r,e.g,e.b,e.opacity)):new ve}function Rn(e,t,n,o){return arguments.length===1?Sa(e):new ve(e,t,n,o??1)}function ve(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}oo(ve,Rn,br(Ot,{brighter(e){return e=e==null?$t:Math.pow($t,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Et:Math.pow(Et,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ve(We(this.r),We(this.g),We(this.b),en(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:No,formatHex:No,formatHex8:Ea,formatRgb:Po,toString:Po}));function No(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}`}function Ea(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}${Ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function Po(){const e=en(this.opacity);return`${e===1?"rgb(":"rgba("}${We(this.r)}, ${We(this.g)}, ${We(this.b)}${e===1?")":`, ${e})`}`}function en(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function We(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ze(e){return e=We(e),(e<16?"0":"")+e.toString(16)}function Co(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ee(e,t,n,o)}function Sr(e){if(e instanceof Ee)return new Ee(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=Ge(e)),!e)return new Ee;if(e instanceof Ee)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new Ee(s,a,l,e.opacity)}function ka(e,t,n,o){return arguments.length===1?Sr(e):new Ee(e,t,n,o??1)}function Ee(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}oo(Ee,ka,br(Ot,{brighter(e){return e=e==null?$t:Math.pow($t,e),new Ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Et:Math.pow(Et,e),new Ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ve(Nn(e>=240?e-240:e+120,r,o),Nn(e,r,o),Nn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Ee(Mo(this.h),Yt(this.s),Yt(this.l),en(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=en(this.opacity);return`${e===1?"hsl(":"hsla("}${Mo(this.h)}, ${Yt(this.s)*100}%, ${Yt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mo(e){return e=(e||0)%360,e<0?e+360:e}function Yt(e){return Math.max(0,Math.min(1,e||0))}function Nn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ro=e=>()=>e;function Na(e,t){return function(n){return e+n*t}}function Pa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Ca(e){return(e=+e)==1?Er:function(t,n){return n-t?Pa(t,n,e):ro(isNaN(t)?n:t)}}function Er(e,t){var n=t-e;return n?Na(e,n):ro(isNaN(e)?t:e)}const tn=(function e(t){var n=Ca(t);function o(r,i){var s=n((r=Rn(r)).r,(i=Rn(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=Er(r.opacity,i.opacity);return function(d){return r.r=s(d),r.g=a(d),r.b=l(d),r.opacity=c(d),r+""}}return o.gamma=e,o})(1);function Ma(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function Aa(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Da(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=_t(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function Ta(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ia(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=_t(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn=new RegExp(Vn.source,"g");function za(e){return function(){return e}}function Oa(e){return function(t){return e(t)+""}}function kr(e,t){var n=Vn.lastIndex=Pn.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Vn.exec(e))&&(r=Pn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Me(o,r)})),n=Pn.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?Oa(l[0].x):za(t):(t=l.length,function(c){for(var d=0,g;d<t;++d)a[(g=l[d]).i]=g.x(c);return a.join("")})}function _t(e,t){var n=typeof t,o;return t==null||n==="boolean"?ro(t):(n==="number"?Me:n==="string"?(o=Ge(t))?(t=o,tn):kr:t instanceof Ge?tn:t instanceof Date?Ta:Aa(t)?Ma:Array.isArray(t)?Da:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ia:Me)(e,t)}var Ao=180/Math.PI,Ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nr(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Ao,skewX:Math.atan(l)*Ao,scaleX:s,scaleY:a}}var Xt;function Ha(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ln:Nr(t.a,t.b,t.c,t.d,t.e,t.f)}function Ra(e){return e==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",e),!(e=Xt.transform.baseVal.consolidate()))?Ln:(e=e.matrix,Nr(e.a,e.b,e.c,e.d,e.e,e.f))}function Pr(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,d,g,f,y,_){if(c!==g||d!==f){var w=y.push("translate(",null,t,null,n);_.push({i:w-4,x:Me(c,g)},{i:w-2,x:Me(d,f)})}else(g||f)&&y.push("translate("+g+t+f+n)}function s(c,d,g,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:g.push(r(g)+"rotate(",null,o)-2,x:Me(c,d)})):d&&g.push(r(g)+"rotate("+d+o)}function a(c,d,g,f){c!==d?f.push({i:g.push(r(g)+"skewX(",null,o)-2,x:Me(c,d)}):d&&g.push(r(g)+"skewX("+d+o)}function l(c,d,g,f,y,_){if(c!==g||d!==f){var w=y.push(r(y)+"scale(",null,",",null,")");_.push({i:w-4,x:Me(c,g)},{i:w-2,x:Me(d,f)})}else(g!==1||f!==1)&&y.push(r(y)+"scale("+g+","+f+")")}return function(c,d){var g=[],f=[];return c=e(c),d=e(d),i(c.translateX,c.translateY,d.translateX,d.translateY,g,f),s(c.rotate,d.rotate,g,f),a(c.skewX,d.skewX,g,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,g,f),c=d=null,function(y){for(var _=-1,w=f.length,k;++_<w;)g[(k=f[_]).i]=k.x(y);return g.join("")}}}var Va=Pr(Ha,"px, ","px)","deg)"),La=Pr(Ra,", ",")",")"),Ka=1e-12;function Do(e){return((e=Math.exp(e))+1/e)/2}function Ba(e){return((e=Math.exp(e))-1/e)/2}function Ya(e){return((e=Math.exp(2*e))-1)/(e+1)}const qt=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],c=i[2],d=s[0],g=s[1],f=s[2],y=d-a,_=g-l,w=y*y+_*_,k,E;if(w<Ka)E=Math.log(f/c)/t,k=function(z){return[a+z*y,l+z*_,c*Math.exp(t*z*E)]};else{var C=Math.sqrt(w),T=(f*f-c*c+o*w)/(2*c*n*C),S=(f*f-c*c-o*w)/(2*f*n*C),H=Math.log(Math.sqrt(T*T+1)-T),N=Math.log(Math.sqrt(S*S+1)-S);E=(N-H)/t,k=function(z){var K=z*E,V=Do(H),U=c/(n*C)*(V*Ya(t*K+H)-Ba(H));return[a+U*y,l+U*_,c*V/Do(t*K+H)]}}return k.duration=E*1e3*t/Math.SQRT2,k}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var ct=0,vt=0,mt=0,Cr=1e3,nn,wt,on=0,Ue=0,pn=0,Nt=typeof performance=="object"&&performance.now?performance:Date,Mr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function io(){return Ue||(Mr(Xa),Ue=Nt.now()+pn)}function Xa(){Ue=0}function rn(){this._call=this._time=this._next=null}rn.prototype=Ar.prototype={constructor:rn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(t==null?0:+t),!this._next&&wt!==this&&(wt?wt._next=this:nn=this,wt=this),this._call=e,this._time=n,Kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kn())}};function Ar(e,t,n){var o=new rn;return o.restart(e,t,n),o}function Za(){io(),++ct;for(var e=nn,t;e;)(t=Ue-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ct}function To(){Ue=(on=Nt.now())+pn,ct=vt=0;try{Za()}finally{ct=0,Wa(),Ue=0}}function Fa(){var e=Nt.now(),t=e-on;t>Cr&&(pn-=t,on=e)}function Wa(){for(var e,t=nn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nn=n);wt=e,Kn(o)}function Kn(e){if(!ct){vt&&(vt=clearTimeout(vt));var t=e-Ue;t>24?(e<1/0&&(vt=setTimeout(To,e-Nt.now()-pn)),mt&&(mt=clearInterval(mt))):(mt||(on=Nt.now(),mt=setInterval(Fa,Cr)),ct=1,Mr(To))}}function Io(e,t,n){var o=new rn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var qa=yn("start","end","cancel","interrupt"),Ga=[],Dr=0,zo=1,Bn=2,Gt=3,Oo=4,Yn=5,Ut=6;function vn(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ua(e,n,{name:t,index:o,group:r,on:qa,tween:Ga,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Dr})}function so(e,t){var n=Ne(e,t);if(n.state>Dr)throw new Error("too late; already scheduled");return n}function Te(e,t){var n=Ne(e,t);if(n.state>Gt)throw new Error("too late; already running");return n}function Ne(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ua(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ar(i,0,n.time);function i(c){n.state=zo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,g,f,y;if(n.state!==zo)return l();for(d in o)if(y=o[d],y.name===n.name){if(y.state===Gt)return Io(s);y.state===Oo?(y.state=Ut,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete o[d]):+d<t&&(y.state=Ut,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete o[d])}if(Io(function(){n.state===Gt&&(n.state=Oo,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Bn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bn){for(n.state=Gt,r=new Array(f=n.tween.length),d=0,g=-1;d<f;++d)(y=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++g]=y);r.length=g+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Yn,1),g=-1,f=r.length;++g<f;)r[g].call(e,d);n.state===Yn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ut,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Qt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Bn&&o.state<Yn,o.state=Ut,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function Qa(e){return this.each(function(){Qt(this,e)})}function Ja(e,t){var n,o;return function(){var r=Te(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function ja(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Te(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function $a(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ne(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?Ja:ja)(n,e,t))}function ao(e,t,n){var o=e._id;return e.each(function(){var r=Te(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ne(r,o).value[t]}}function Tr(e,t){var n;return(typeof t=="number"?Me:t instanceof Ge?tn:(n=Ge(t))?(t=n,tn):kr)(e,t)}function el(e){return function(){this.removeAttribute(e)}}function tl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nl(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function ol(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function rl(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function il(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function sl(e,t){var n=mn(e),o=n==="transform"?La:Tr;return this.attrTween(e,typeof t=="function"?(n.local?il:rl)(n,o,ao(this,"attr."+e,t)):t==null?(n.local?tl:el)(n):(n.local?ol:nl)(n,o,t))}function al(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ll(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function cl(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ll(e,i)),n}return r._value=t,r}function ul(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&al(e,i)),n}return r._value=t,r}function dl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=mn(e);return this.tween(n,(o.local?cl:ul)(o,t))}function fl(e,t){return function(){so(this,e).delay=+t.apply(this,arguments)}}function hl(e,t){return t=+t,function(){so(this,e).delay=t}}function gl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fl:hl)(t,e)):Ne(this.node(),t).delay}function yl(e,t){return function(){Te(this,e).duration=+t.apply(this,arguments)}}function ml(e,t){return t=+t,function(){Te(this,e).duration=t}}function pl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yl:ml)(t,e)):Ne(this.node(),t).duration}function vl(e,t){if(typeof t!="function")throw new Error;return function(){Te(this,e).ease=t}}function wl(e){var t=this._id;return arguments.length?this.each(vl(t,e)):Ne(this.node(),t).ease}function xl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Te(this,e).ease=n}}function _l(e){if(typeof e!="function")throw new Error;return this.each(xl(this._id,e))}function bl(e){typeof e!="function"&&(e=ur(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Re(o,this._parents,this._name,this._id)}function Sl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],c=n[a],d=l.length,g=s[a]=new Array(d),f,y=0;y<d;++y)(f=l[y]||c[y])&&(g[y]=f);for(;a<o;++a)s[a]=t[a];return new Re(s,this._parents,this._name,this._id)}function El(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kl(e,t,n){var o,r,i=El(t)?so:Te;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function Nl(e,t){var n=this._id;return arguments.length<2?Ne(this.node(),n).on.on(e):this.each(kl(n,e,t))}function Pl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Cl(){return this.on("end.remove",Pl(this._id))}function Ml(e){var t=this._name,n=this._id;typeof e!="function"&&(e=to(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,c=i[s]=new Array(l),d,g,f=0;f<l;++f)(d=a[f])&&(g=e.call(d,d.__data__,f,a))&&("__data__"in d&&(g.__data__=d.__data__),c[f]=g,vn(c[f],t,n,f,c,Ne(d,n)));return new Re(i,this._parents,t,n)}function Al(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cr(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],c=l.length,d,g=0;g<c;++g)if(d=l[g]){for(var f=e.call(d,d.__data__,g,l),y,_=Ne(d,n),w=0,k=f.length;w<k;++w)(y=f[w])&&vn(y,t,n,w,f,_);i.push(f),s.push(d)}return new Re(i,s,t,n)}var Dl=zt.prototype.constructor;function Tl(){return new Dl(this._groups,this._parents)}function Il(e,t){var n,o,r;return function(){var i=lt(this,e),s=(this.style.removeProperty(e),lt(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function Ir(e){return function(){this.style.removeProperty(e)}}function zl(e,t,n){var o,r=n+"",i;return function(){var s=lt(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Ol(e,t,n){var o,r,i;return function(){var s=lt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),lt(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function Hl(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Te(this,e),c=l.on,d=l.value[i]==null?a||(a=Ir(t)):void 0;(c!==n||r!==d)&&(o=(n=c).copy()).on(s,r=d),l.on=o}}function Rl(e,t,n){var o=(e+="")=="transform"?Va:Tr;return t==null?this.styleTween(e,Il(e,o)).on("end.style."+e,Ir(e)):typeof t=="function"?this.styleTween(e,Ol(e,o,ao(this,"style."+e,t))).each(Hl(this._id,e)):this.styleTween(e,zl(e,o,t),n).on("end.style."+e,null)}function Vl(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ll(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Vl(e,s,n)),o}return i._value=t,i}function Kl(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ll(e,t,n??""))}function Bl(e){return function(){this.textContent=e}}function Yl(e){return function(){var t=e(this);this.textContent=t??""}}function Xl(e){return this.tween("text",typeof e=="function"?Yl(ao(this,"text",e)):Bl(e==null?"":e+""))}function Zl(e){return function(t){this.textContent=e.call(this,t)}}function Fl(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Zl(r)),t}return o._value=e,o}function Wl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fl(e))}function ql(){for(var e=this._name,t=this._id,n=zr(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=Ne(l,t);vn(l,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Re(o,this._parents,e,n)}function Gl(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var c=Te(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&i()})}var Ul=0;function Re(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function zr(){return++Ul}var Ie=zt.prototype;Re.prototype={constructor:Re,select:Ml,selectAll:Al,selectChild:Ie.selectChild,selectChildren:Ie.selectChildren,filter:bl,merge:Sl,selection:Tl,transition:ql,call:Ie.call,nodes:Ie.nodes,node:Ie.node,size:Ie.size,empty:Ie.empty,each:Ie.each,on:Nl,attr:sl,attrTween:dl,style:Rl,styleTween:Kl,text:Xl,textTween:Wl,remove:Cl,tween:$a,delay:gl,duration:pl,ease:wl,easeVarying:_l,end:Gl,[Symbol.iterator]:Ie[Symbol.iterator]};function Ql(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jl={time:null,delay:0,duration:250,ease:Ql};function jl(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $l(e){var t,n;e instanceof Re?(t=e._id,e=e._name):(t=zr(),(n=Jl).time=io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&vn(l,e,t,c,s,n||jl(l,t));return new Re(o,this._parents,e,t)}zt.prototype.interrupt=Qa;zt.prototype.transition=$l;const Zt=e=>()=>e;function ec(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ze(e,t,n){this.k=e,this.x=t,this.y=n}ze.prototype={constructor:ze,scale:function(e){return e===1?this:new ze(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ze(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wn=new ze(1,0,0);Or.prototype=ze.prototype;function Or(e){for(;!e.__zoom;)if(!(e=e.parentNode))return wn;return e.__zoom}function Cn(e){e.stopImmediatePropagation()}function pt(e){e.preventDefault(),e.stopImmediatePropagation()}function tc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ho(){return this.__zoom||wn}function oc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ic(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function sc(){var e=tc,t=nc,n=ic,o=oc,r=rc,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=qt,c=yn("start","zoom","end"),d,g,f,y=500,_=150,w=0,k=10;function E(h){h.property("__zoom",Ho).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",U).filter(r).on("touchstart.zoom",Q).on("touchmove.zoom",m).on("touchend.zoom touchcancel.zoom",b).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(h,x,v,P){var M=h.selection?h.selection():h;M.property("__zoom",Ho),h!==M?H(h,x,v,P):M.interrupt().each(function(){N(this,arguments).event(P).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},E.scaleBy=function(h,x,v,P){E.scaleTo(h,function(){var M=this.__zoom.k,D=typeof x=="function"?x.apply(this,arguments):x;return M*D},v,P)},E.scaleTo=function(h,x,v,P){E.transform(h,function(){var M=t.apply(this,arguments),D=this.__zoom,I=v==null?S(M):typeof v=="function"?v.apply(this,arguments):v,O=D.invert(I),X=typeof x=="function"?x.apply(this,arguments):x;return n(T(C(D,X),I,O),M,s)},v,P)},E.translateBy=function(h,x,v,P){E.transform(h,function(){return n(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),s)},null,P)},E.translateTo=function(h,x,v,P,M){E.transform(h,function(){var D=t.apply(this,arguments),I=this.__zoom,O=P==null?S(D):typeof P=="function"?P.apply(this,arguments):P;return n(wn.translate(O[0],O[1]).scale(I.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof v=="function"?-v.apply(this,arguments):-v),D,s)},P,M)};function C(h,x){return x=Math.max(i[0],Math.min(i[1],x)),x===h.k?h:new ze(x,h.x,h.y)}function T(h,x,v){var P=x[0]-v[0]*h.k,M=x[1]-v[1]*h.k;return P===h.x&&M===h.y?h:new ze(h.k,P,M)}function S(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function H(h,x,v,P){h.on("start.zoom",function(){N(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(P).end()}).tween("zoom",function(){var M=this,D=arguments,I=N(M,D).event(P),O=t.apply(M,D),X=v==null?S(O):typeof v=="function"?v.apply(M,D):v,Y=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),B=M.__zoom,Z=typeof x=="function"?x.apply(M,D):x,q=l(B.invert(X).concat(Y/B.k),Z.invert(X).concat(Y/Z.k));return function(L){if(L===1)L=Z;else{var F=q(L),ee=Y/F[2];L=new ze(ee,X[0]-F[0]*ee,X[1]-F[1]*ee)}I.zoom(null,L)}})}function N(h,x,v){return!v&&h.__zooming||new z(h,x)}function z(h,x){this.that=h,this.args=x,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,x),this.taps=0}z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,x){return this.mouse&&h!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var x=Se(this.that).datum();c.call(h,this.that,new ec(h,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:c}),x)}};function K(h,...x){if(!e.apply(this,arguments))return;var v=N(this,x).event(h),P=this.__zoom,M=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,o.apply(this,arguments)))),D=Ce(h);if(v.wheel)(v.mouse[0][0]!==D[0]||v.mouse[0][1]!==D[1])&&(v.mouse[1]=P.invert(v.mouse[0]=D)),clearTimeout(v.wheel);else{if(P.k===M)return;v.mouse=[D,P.invert(D)],Qt(this),v.start()}pt(h),v.wheel=setTimeout(I,_),v.zoom("mouse",n(T(C(P,M),v.mouse[0],v.mouse[1]),v.extent,s));function I(){v.wheel=null,v.end()}}function V(h,...x){if(f||!e.apply(this,arguments))return;var v=h.currentTarget,P=N(this,x,!0).event(h),M=Se(h.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",Y,!0),D=Ce(h,v),I=h.clientX,O=h.clientY;xr(h.view),Cn(h),P.mouse=[D,this.__zoom.invert(D)],Qt(this),P.start();function X(B){if(pt(B),!P.moved){var Z=B.clientX-I,q=B.clientY-O;P.moved=Z*Z+q*q>w}P.event(B).zoom("mouse",n(T(P.that.__zoom,P.mouse[0]=Ce(B,v),P.mouse[1]),P.extent,s))}function Y(B){M.on("mousemove.zoom mouseup.zoom",null),_r(B.view,P.moved),pt(B),P.event(B).end()}}function U(h,...x){if(e.apply(this,arguments)){var v=this.__zoom,P=Ce(h.changedTouches?h.changedTouches[0]:h,this),M=v.invert(P),D=v.k*(h.shiftKey?.5:2),I=n(T(C(v,D),P,M),t.apply(this,x),s);pt(h),a>0?Se(this).transition().duration(a).call(H,I,P,h):Se(this).call(E.transform,I,P,h)}}function Q(h,...x){if(e.apply(this,arguments)){var v=h.touches,P=v.length,M=N(this,x,h.changedTouches.length===P).event(h),D,I,O,X;for(Cn(h),I=0;I<P;++I)O=v[I],X=Ce(O,this),X=[X,this.__zoom.invert(X),O.identifier],M.touch0?!M.touch1&&M.touch0[2]!==X[2]&&(M.touch1=X,M.taps=0):(M.touch0=X,D=!0,M.taps=1+!!d);d&&(d=clearTimeout(d)),D&&(M.taps<2&&(g=X[0],d=setTimeout(function(){d=null},y)),Qt(this),M.start())}}function m(h,...x){if(this.__zooming){var v=N(this,x).event(h),P=h.changedTouches,M=P.length,D,I,O,X;for(pt(h),D=0;D<M;++D)I=P[D],O=Ce(I,this),v.touch0&&v.touch0[2]===I.identifier?v.touch0[0]=O:v.touch1&&v.touch1[2]===I.identifier&&(v.touch1[0]=O);if(I=v.that.__zoom,v.touch1){var Y=v.touch0[0],B=v.touch0[1],Z=v.touch1[0],q=v.touch1[1],L=(L=Z[0]-Y[0])*L+(L=Z[1]-Y[1])*L,F=(F=q[0]-B[0])*F+(F=q[1]-B[1])*F;I=C(I,Math.sqrt(L/F)),O=[(Y[0]+Z[0])/2,(Y[1]+Z[1])/2],X=[(B[0]+q[0])/2,(B[1]+q[1])/2]}else if(v.touch0)O=v.touch0[0],X=v.touch0[1];else return;v.zoom("touch",n(T(I,O,X),v.extent,s))}}function b(h,...x){if(this.__zooming){var v=N(this,x).event(h),P=h.changedTouches,M=P.length,D,I;for(Cn(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},y),D=0;D<M;++D)I=P[D],v.touch0&&v.touch0[2]===I.identifier?delete v.touch0:v.touch1&&v.touch1[2]===I.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(I=Ce(I,this),Math.hypot(g[0]-I[0],g[1]-I[1])<k)){var O=Se(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return E.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Zt(+h),E):o},E.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(!!h),E):e},E.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Zt(!!h),E):r},E.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Zt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),E):t},E.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],E):[i[0],i[1]]},E.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],E):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},E.constrain=function(h){return arguments.length?(n=h,E):n},E.duration=function(h){return arguments.length?(a=+h,E):a},E.interpolate=function(h){return arguments.length?(l=h,E):l},E.on=function(){var h=c.on.apply(c,arguments);return h===c?E:h},E.clickDistance=function(h){return arguments.length?(w=(h=+h)*h,E):Math.sqrt(w)},E.tapDistance=function(h){return arguments.length?(k=+h,E):k},E}const Pt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Xn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hr=["Enter"," ","Escape"],ac={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ut;(function(e){e.Strict="strict",e.Loose="loose"})(ut||(ut={}));var at;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(at||(at={}));var sn;(function(e){e.Partial="partial",e.Full="full"})(sn||(sn={}));const Zn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ke;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ke||(Ke={}));var an;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(an||(an={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));const Ro={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top};function lc(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Vo(e,t,n){if(!n)return;const o=[];e.forEach((r,i)=>{t?.has(i)||o.push(r)}),o.length&&n(o)}function cc(e){return e===null?null:e?"valid":"invalid"}const Rr=e=>"id"in e&&"source"in e&&"target"in e,uc=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),lo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ht=(e,t=[0,0])=>{const{width:n,height:o}=je(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},dc=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const i=typeof r=="string";let s=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(r):lo(r)?r:t.nodeLookup.get(r.id));const a=s?ln(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _n(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bn(n)},xn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=ln(o);n=_n(n,r)}}),bn(n)},co=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const a={...Vt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:d,selectable:g=!0,hidden:f=!1}=c;if(s&&!g||f)continue;const y=d.width??c.width??c.initialWidth??null,_=d.height??c.height??c.initialHeight??null,w=Ct(a,ft(c)),k=(y??0)*(_??0),E=i&&w>0;(!c.internals.handleBounds||E||w>=k||c.dragging)&&l.push(c)}return l},fc=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function hc(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function gc({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);const a=hc(e,s),l=xn(a),c=uo(l,t,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(c,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function Vr({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??o;let g=s.extent||r;if(s.extent==="parent"&&!s.expandParent)if(!a)i?.("005",Pt.error005());else{const y=a.measured.width,_=a.measured.height;y&&_&&(g=[[l,c],[l+y,c+_]])}else a&&ht(s.extent)&&(g=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=ht(g)?Qe(t,g,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&i?.("015",Pt.error015()),{position:{x:f.x-l+(s.measured.width??0)*d[0],y:f.y-c+(s.measured.height??0)*d[1]},positionAbsolute:f}}async function yc({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const y=i.has(f.id),_=!y&&f.parentId&&s.find(w=>w.id===f.parentId);(y||_)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=o.filter(f=>f.deletable!==!1),d=fc(s,l);for(const f of l)a.has(f.id)&&!d.find(_=>_.id===f.id)&&d.push(f);if(!r)return{edges:d,nodes:s};const g=await r({nodes:s,edges:d});return typeof g=="boolean"?g?{edges:d,nodes:s}:{edges:[],nodes:[]}:g}const dt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Qe=(e={x:0,y:0},t,n)=>({x:dt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:dt(e.y,t[0][1],t[1][1]-(n?.height??0))});function Lr(e,t,n){const{width:o,height:r}=je(n),{x:i,y:s}=n.internals.positionAbsolute;return Qe(e,[[i,s],[i+o,s+r]],t)}const Lo=(e,t,n)=>e<t?dt(Math.abs(e-t),1,t)/t:e>n?-dt(Math.abs(e-n),1,t)/t:0,Kr=(e,t,n=15,o=40)=>{const r=Lo(e.x,o,t.width-o)*n,i=Lo(e.y,o,t.height-o)*n;return[r,i]},_n=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Fn=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),bn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ft=(e,t=[0,0])=>{const{x:n,y:o}=lo(e)?e.internals.positionAbsolute:Ht(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ln=(e,t=[0,0])=>{const{x:n,y:o}=lo(e)?e.internals.positionAbsolute:Ht(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},mc=(e,t)=>bn(_n(Fn(e),Fn(t))),Ct=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Ko=e=>Oe(e.width)&&Oe(e.height)&&Oe(e.x)&&Oe(e.y),Oe=e=>!isNaN(e)&&isFinite(e),pc=(e,t)=>{},Rt=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Vt=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return i?Rt(a,s):a},cn=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function nt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function vc(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=nt(e,n),r=nt(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=nt(e.top??e.y??0,n),r=nt(e.bottom??e.y??0,n),i=nt(e.left??e.x??0,t),s=nt(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function wc(e,t,n,o,r,i){const{x:s,y:a}=cn(e,[t,n,o]),{x:l,y:c}=cn({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=r-l,g=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(g)}}const uo=(e,t,n,o,r,i)=>{const s=vc(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=dt(c,o,r),g=e.x+e.width/2,f=e.y+e.height/2,y=t/2-g*d,_=n/2-f*d,w=wc(e,y,_,d,t,n),k={left:Math.min(w.left-s.left,0),top:Math.min(w.top-s.top,0),right:Math.min(w.right-s.right,0),bottom:Math.min(w.bottom-s.bottom,0)};return{x:y-k.left+k.right,y:_-k.top+k.bottom,zoom:d}},un=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ht(e){return e!=null&&e!=="parent"}function je(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function xc(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function _c(e,t={width:0,height:0},n,o,r){const i={...e},s=o.get(n);if(s){const a=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function bc(e){return{...ac,...e||{}}}function Mn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=ke(e),a=Vt({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:l,y:c}=n?Rt(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Br=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yr=e=>e?.getRootNode?.()||window?.document,Sc=["INPUT","SELECT","TEXTAREA"];function Xr(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Sc.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Zr=e=>"clientX"in e,ke=(e,t)=>{const n=Zr(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Bo=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Br(s)}})};function Ec({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,c=t*.125+i*.375+a*.375+o*.125,d=Math.abs(l-e),g=Math.abs(c-t);return[l,c,d,g]}function Ft(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Yo({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case W.Left:return[t-Ft(t-o,i),n];case W.Right:return[t+Ft(o-t,i),n];case W.Top:return[t,n-Ft(n-r,i)];case W.Bottom:return[t,n+Ft(r-n,i)]}}function Fr({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:i=W.Top,curvature:s=.25}){const[a,l]=Yo({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[c,d]=Yo({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[g,f,y,_]=Ec({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${o},${r}`,g,f,y,_]}function Wr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function kc({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(o!==void 0)return o;const i=r&&n?1e3:0,s=Math.max(e.parentId||r&&e.selected?e.internals.z:0,t.parentId||r&&t.selected?t.internals.z:0);return i+s}function Nc({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=_n(ln(e),ln(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Ct(s,bn(i))>0}const Pc=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,Cc=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Mc=(e,t)=>{if(!e.source||!e.target)return t;let n;return Rr(e)?n={...e}:n={...e,id:Pc(e)},Cc(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function qr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=Wr({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const Xo={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}},Ac=({source:e,sourcePosition:t=W.Bottom,target:n})=>t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Zo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Dc({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:r,offset:i,stepPosition:s}){const a=Xo[t],l=Xo[o],c={x:e.x+a.x*i,y:e.y+a.y*i},d={x:n.x+l.x*i,y:n.y+l.y*i},g=Ac({source:c,sourcePosition:t,target:d}),f=g.x!==0?"x":"y",y=g[f];let _=[],w,k;const E={x:0,y:0},C={x:0,y:0},[,,T,S]=Wr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*l[f]===-1){f==="x"?(w=r.x??c.x+(d.x-c.x)*s,k=r.y??(c.y+d.y)/2):(w=r.x??(c.x+d.x)/2,k=r.y??c.y+(d.y-c.y)*s);const N=[{x:w,y:c.y},{x:w,y:d.y}],z=[{x:c.x,y:k},{x:d.x,y:k}];a[f]===y?_=f==="x"?N:z:_=f==="x"?z:N}else{const N=[{x:c.x,y:d.y}],z=[{x:d.x,y:c.y}];if(f==="x"?_=a.x===y?z:N:_=a.y===y?N:z,t===o){const m=Math.abs(e[f]-n[f]);if(m<=i){const b=Math.min(i-1,i-m);a[f]===y?E[f]=(c[f]>e[f]?-1:1)*b:C[f]=(d[f]>n[f]?-1:1)*b}}if(t!==o){const m=f==="x"?"y":"x",b=a[f]===l[m],h=c[m]>d[m],x=c[m]<d[m];(a[f]===1&&(!b&&h||b&&x)||a[f]!==1&&(!b&&x||b&&h))&&(_=f==="x"?N:z)}const K={x:c.x+E.x,y:c.y+E.y},V={x:d.x+C.x,y:d.y+C.y},U=Math.max(Math.abs(K.x-_[0].x),Math.abs(V.x-_[0].x)),Q=Math.max(Math.abs(K.y-_[0].y),Math.abs(V.y-_[0].y));U>=Q?(w=(K.x+V.x)/2,k=_[0].y):(w=_[0].x,k=(K.y+V.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},..._,{x:d.x+C.x,y:d.y+C.y},n],w,k,T,S]}function Tc(e,t,n,o){const r=Math.min(Zo(e,t)/2,Zo(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*c},${s}Q ${i},${s} ${i},${s+r*d}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function fo({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:i=W.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20,stepPosition:d=.5}){const[g,f,y,_,w]=Dc({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:l},offset:c,stepPosition:d});return[g.reduce((E,C,T)=>{let S="";return T>0&&T<g.length-1?S=Tc(g[T-1],C,g[T+1],s):S=`${T===0?"M":"L"}${C.x} ${C.y}`,E+=S,E},""),f,y,_,w]}function Fo(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ic(e){const{sourceNode:t,targetNode:n}=e;if(!Fo(t)||!Fo(n))return null;const o=t.internals.handleBounds||Wo(t.handles),r=n.internals.handleBounds||Wo(n.handles),i=qo(o?.source??[],e.sourceHandle),s=qo(e.connectionMode===ut.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",Pt.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||W.Bottom,l=s?.position||W.Top,c=Mt(t,i,a),d=Mt(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function Wo(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Mt(e,t,n=W.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??je(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case W.Top:return{x:r+s/2,y:i};case W.Right:return{x:r+s,y:i+a/2};case W.Bottom:return{x:r+s/2,y:i+a};case W.Left:return{x:r,y:i+a/2}}}function qo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Wn(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function zc(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||o,a.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=Wn(l,t);i.has(c)||(s.push({id:c,color:l.color||n,...l}),i.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const ho={nodeOrigin:[0,0],nodeExtent:Xn,elevateNodesOnSelect:!0,defaults:{}},Oc={...ho,checkEquality:!0};function go(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Hc(e,t,n){const o=go(ho,n);for(const r of e.values())if(r.parentId)yo(r,e,t,o);else{const i=Ht(r,o.nodeOrigin),s=ht(r.extent)?r.extent:o.nodeExtent,a=Qe(i,s,je(r));r.internals.positionAbsolute=a}}function Rc(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],o=[];for(const r of e.handles){const i={id:r.id,width:r.width??1,height:r.height??1,nodeId:e.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?n.push(i):r.type==="target"&&o.push(i)}return{source:n,target:o}}function Vc(e,t,n,o){const r=go(Oc,o);let i=e.length>0;const s=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let c=s.get(l.id);if(r.checkEquality&&l===c?.internals.userNode)t.set(l.id,c);else{const d=Ht(l,r.nodeOrigin),g=ht(l.extent)?l.extent:r.nodeExtent,f=Qe(d,g,je(l));c={...r.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:f,handleBounds:Rc(l,c),z:Gr(l,a),userNode:l}},t.set(l.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(i=!1),l.parentId&&yo(c,t,n,o)}return i}function Lc(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function yo(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=go(ho,o),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Lc(e,n);const c=r?1e3:0,{x:d,y:g,z:f}=Kc(e,l,i,s,c),{positionAbsolute:y}=e.internals,_=d!==y.x||g!==y.y;(_||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:d,y:g}:y,z:f}})}function Gr(e,t){return(Oe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Kc(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,a=je(e),l=Ht(e,n),c=ht(e.extent)?Qe(l,e.extent,a):l;let d=Qe({x:i+c.x,y:s+c.y},o,a);e.extent==="parent"&&(d=Lr(d,a,t));const g=Gr(e,r),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>=g?f+1:g}}function Bc(e,t,n,o=[0,0]){const r=[],i=new Map;for(const s of e){const a=t.get(s.parentId);if(!a)continue;const l=i.get(s.parentId)?.expandedRect??ft(a),c=mc(l,s.rect);i.set(s.parentId,{expandedRect:c,parent:a})}return i.size>0&&i.forEach(({expandedRect:s,parent:a},l)=>{const c=a.internals.positionAbsolute,d=je(a),g=a.origin??o,f=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,y=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,_=Math.max(d.width,Math.round(s.width)),w=Math.max(d.height,Math.round(s.height)),k=(_-d.width)*g[0],E=(w-d.height)*g[1];(f>0||y>0||k||E)&&(r.push({id:l,type:"position",position:{x:a.position.x-f+k,y:a.position.y-y+E}}),n.get(l)?.forEach(C=>{e.some(T=>T.id===C.id)||r.push({id:C.id,type:"position",position:{x:C.position.x+f,y:C.position.y+y}})})),(d.width<s.width||d.height<s.height||f||y)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:_+(f?g[0]*f-k:0),height:w+(y?g[1]*y-E:0)}})}),r}function Yc(e,t,n,o,r,i){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),g=[];for(const f of e.values()){const y=t.get(f.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),a=!0;continue}const _=Br(f.nodeElement),w=y.measured.width!==_.width||y.measured.height!==_.height;if(!!(_.width&&_.height&&(w||!y.internals.handleBounds||f.force))){const E=f.nodeElement.getBoundingClientRect(),C=ht(y.extent)?y.extent:i;let{positionAbsolute:T}=y.internals;y.parentId&&y.extent==="parent"?T=Lr(T,_,t.get(y.parentId)):C&&(T=Qe(T,C,_));const S={...y,measured:_,internals:{...y.internals,positionAbsolute:T,handleBounds:{source:Bo("source",f.nodeElement,E,d,y.id),target:Bo("target",f.nodeElement,E,d,y.id)}}};t.set(y.id,S),y.parentId&&yo(S,t,n,{nodeOrigin:r}),a=!0,w&&(l.push({id:y.id,type:"dimensions",dimensions:_}),y.expandParent&&y.parentId&&g.push({id:y.id,parentId:y.parentId,rect:ft(S,r)}))}}if(g.length>0){const f=Bc(g,t,n,r);l.push(...f)}return{changes:l,updatedInternals:a}}async function Xc({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Go(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const c=o.get(s)||new Map;o.set(s,c.set(n,t))}}function Zc(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},c=`${r}-${s}--${i}-${a}`,d=`${i}-${a}--${r}-${s}`;Go("source",l,d,e,r,s),Go("target",l,c,e,i,a),t.set(o.id,o)}}function Ur(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ur(n,t):!1}function Uo(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Fc(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!Ur(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&r.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function An({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[s,a]of t){const l=n.get(s)?.internals.userNode;l&&r.push({...l,position:a.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function Wc({dragItems:e,snapGrid:t,x:n,y:o}){const r=e.values().next().value;if(!r)return null;const i={x:n-r.distance.x,y:o-r.distance.y},s=Rt(i,t);return{x:s.x-i.x,y:s.y-i.y}}function qc({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,g=!1,f=null,y=!1,_=!1,w=null;function k({noDragClassName:C,handleSelector:T,domNode:S,isSelectable:H,nodeId:N,nodeClickDistance:z=0}){f=Se(S);function K({x:m,y:b}){const{nodeLookup:h,nodeExtent:x,snapGrid:v,snapToGrid:P,nodeOrigin:M,onNodeDrag:D,onSelectionDrag:I,onError:O,updateNodePositions:X}=t();i={x:m,y:b};let Y=!1;const B=a.size>1,Z=B&&x?Fn(xn(a)):null,q=B&&P?Wc({dragItems:a,snapGrid:v,x:m,y:b}):null;for(const[L,F]of a){if(!h.has(L))continue;let ee={x:m-F.distance.x,y:b-F.distance.y};P&&(ee=q?{x:Math.round(ee.x+q.x),y:Math.round(ee.y+q.y)}:Rt(ee,v));let ye=null;if(B&&x&&!F.extent&&Z){const{positionAbsolute:ne}=F.internals,fe=ne.x-Z.x+x[0][0],$e=ne.x+F.measured.width-Z.x2+x[1][0],gt=ne.y-Z.y+x[0][1],et=ne.y+F.measured.height-Z.y2+x[1][1];ye=[[fe,gt],[$e,et]]}const{position:J,positionAbsolute:ie}=Vr({nodeId:L,nextPosition:ee,nodeLookup:h,nodeExtent:ye||x,nodeOrigin:M,onError:O});Y=Y||F.position.x!==J.x||F.position.y!==J.y,F.position=J,F.internals.positionAbsolute=ie}if(_=_||Y,!!Y&&(X(a,!0),w&&(o||D||!N&&I))){const[L,F]=An({nodeId:N,dragItems:a,nodeLookup:h});o?.(w,a,L,F),D?.(w,L,F),N||I?.(w,F)}}async function V(){if(!d)return;const{transform:m,panBy:b,autoPanSpeed:h,autoPanOnNodeDrag:x}=t();if(!x){l=!1,cancelAnimationFrame(s);return}const[v,P]=Kr(c,d,h);(v!==0||P!==0)&&(i.x=(i.x??0)-v/m[2],i.y=(i.y??0)-P/m[2],await b({x:v,y:P})&&K(i)),s=requestAnimationFrame(V)}function U(m){const{nodeLookup:b,multiSelectionActive:h,nodesDraggable:x,transform:v,snapGrid:P,snapToGrid:M,selectNodesOnDrag:D,onNodeDragStart:I,onSelectionDragStart:O,unselectNodesAndEdges:X}=t();g=!0,(!D||!H)&&!h&&N&&(b.get(N)?.selected||X()),H&&D&&N&&e?.(N);const Y=Mn(m.sourceEvent,{transform:v,snapGrid:P,snapToGrid:M,containerBounds:d});if(i=Y,a=Fc(b,x,Y,N),a.size>0&&(n||I||!N&&O)){const[B,Z]=An({nodeId:N,dragItems:a,nodeLookup:b});n?.(m.sourceEvent,a,B,Z),I?.(m.sourceEvent,B,Z),N||O?.(m.sourceEvent,Z)}}const Q=ha().clickDistance(z).on("start",m=>{const{domNode:b,nodeDragThreshold:h,transform:x,snapGrid:v,snapToGrid:P}=t();d=b?.getBoundingClientRect()||null,y=!1,_=!1,w=m.sourceEvent,h===0&&U(m),i=Mn(m.sourceEvent,{transform:x,snapGrid:v,snapToGrid:P,containerBounds:d}),c=ke(m.sourceEvent,d)}).on("drag",m=>{const{autoPanOnNodeDrag:b,transform:h,snapGrid:x,snapToGrid:v,nodeDragThreshold:P,nodeLookup:M}=t(),D=Mn(m.sourceEvent,{transform:h,snapGrid:x,snapToGrid:v,containerBounds:d});if(w=m.sourceEvent,(m.sourceEvent.type==="touchmove"&&m.sourceEvent.touches.length>1||N&&!M.has(N))&&(y=!0),!y){if(!l&&b&&g&&(l=!0,V()),!g){const I=ke(m.sourceEvent,d),O=I.x-c.x,X=I.y-c.y;Math.sqrt(O*O+X*X)>P&&U(m)}(i.x!==D.xSnapped||i.y!==D.ySnapped)&&a&&g&&(c=ke(m.sourceEvent,d),K(D))}}).on("end",m=>{if(!(!g||y)&&(l=!1,g=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:b,updateNodePositions:h,onNodeDragStop:x,onSelectionDragStop:v}=t();if(_&&(h(a,!1),_=!1),r||x||!N&&v){const[P,M]=An({nodeId:N,dragItems:a,nodeLookup:b,dragging:!1});r?.(m.sourceEvent,a,P,M),x?.(m.sourceEvent,P,M),N||v?.(m.sourceEvent,M)}}}).filter(m=>{const b=m.target;return!m.button&&(!C||!Uo(b,`.${C}`,S))&&(!T||Uo(b,T,S))});f.call(Q)}function E(){f?.on(".drag",null)}return{update:k,destroy:E}}function Gc(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Ct(r,ft(i))>0&&o.push(i);return o}const Uc=250;function Qc(e,t,n,o){let r=[],i=1/0;const s=Gc(e,n,t+Uc);for(const a of s){const l=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const c of l){if(o.nodeId===c.nodeId&&o.type===c.type&&o.id===c.id)continue;const{x:d,y:g}=Mt(a,c,c.position,!0),f=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(g-e.y,2));f>t||(f<i?(r=[{...c,x:d,y:g}],i=f):f===i&&r.push({...c,x:d,y:g}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(l=>l.type===a)??r[0]}return r[0]}function Qr(e,t,n,o,r,i=!1){const s=o.get(e);if(!s)return null;const a=r==="strict"?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(c=>c.id===n):a?.[0])??null;return l&&i?{...l,...Mt(s,l,l.position,!0)}:l}function Jr(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Jc(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const jr=()=>!0;function jc(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:g,panBy:f,cancelConnection:y,onConnectStart:_,onConnect:w,onConnectEnd:k,isValidConnection:E=jr,onReconnectEnd:C,updateConnection:T,getTransform:S,getFromHandle:H,autoPanSpeed:N,dragThreshold:z=1,handleDomNode:K}){const V=Yr(e.target);let U=0,Q;const{x:m,y:b}=ke(e),h=Jr(i,K),x=a?.getBoundingClientRect();let v=!1;if(!x||!h)return;const P=Qr(r,h,o,l,t);if(!P)return;let M=ke(e,x),D=!1,I=null,O=!1,X=null;function Y(){if(!d||!x)return;const[J,ie]=Kr(M,x,N);f({x:J,y:ie}),U=requestAnimationFrame(Y)}const B={...P,nodeId:r,type:h,position:P.position},Z=l.get(r);let L={inProgress:!0,isValid:null,from:Mt(Z,B,W.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:Z,to:M,toHandle:null,toPosition:Ro[B.position],toNode:null};function F(){v=!0,T(L),_?.(e,{nodeId:r,handleId:o,handleType:h})}z===0&&F();function ee(J){if(!v){const{x:$e,y:gt}=ke(J),et=$e-m,te=gt-b;if(!(et*et+te*te>z*z))return;F()}if(!H()||!B){ye(J);return}const ie=S();M=ke(J,x),Q=Qc(Vt(M,ie,!1,[1,1]),n,l,B),D||(Y(),D=!0);const ne=$r(J,{handle:Q,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:E,doc:V,lib:c,flowId:g,nodeLookup:l});X=ne.handleDomNode,I=ne.connection,O=Jc(!!Q,ne.isValid);const fe={...L,isValid:O,to:ne.toHandle&&O?cn({x:ne.toHandle.x,y:ne.toHandle.y},ie):M,toHandle:ne.toHandle,toPosition:O&&ne.toHandle?ne.toHandle.position:Ro[B.position],toNode:ne.toHandle?l.get(ne.toHandle.nodeId):null};O&&Q&&L.toHandle&&fe.toHandle&&L.toHandle.type===fe.toHandle.type&&L.toHandle.nodeId===fe.toHandle.nodeId&&L.toHandle.id===fe.toHandle.id&&L.to.x===fe.to.x&&L.to.y===fe.to.y||(T(fe),L=fe)}function ye(J){if(!("touches"in J&&J.touches.length>0)){if(v){(Q||X)&&I&&O&&w?.(I);const{inProgress:ie,...ne}=L,fe={...ne,toPosition:L.toHandle?L.toPosition:null};k?.(J,fe),i&&C?.(J,fe)}y(),cancelAnimationFrame(U),D=!1,O=!1,I=null,X=null,V.removeEventListener("mousemove",ee),V.removeEventListener("mouseup",ye),V.removeEventListener("touchmove",ee),V.removeEventListener("touchend",ye)}}V.addEventListener("mousemove",ee),V.addEventListener("mouseup",ye),V.addEventListener("touchmove",ee),V.addEventListener("touchend",ye)}function $r(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:c=jr,nodeLookup:d}){const g=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:_}=ke(e),w=s.elementFromPoint(y,_),k=w?.classList.contains(`${a}-flow__handle`)?w:f,E={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const C=Jr(void 0,k),T=k.getAttribute("data-nodeid"),S=k.getAttribute("data-handleid"),H=k.classList.contains("connectable"),N=k.classList.contains("connectableend");if(!T||!C)return E;const z={source:g?T:o,sourceHandle:g?S:r,target:g?o:T,targetHandle:g?r:S};E.connection=z;const V=H&&N&&(n===ut.Strict?g&&C==="source"||!g&&C==="target":T!==o||S!==r);E.isValid=V&&c(z),E.toHandle=Qr(T,C,S,d,n,!0)}return E}const Qo={onPointerDown:jc,isValid:$r},$c=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Sn=e=>({x:e.x,y:e.y,zoom:e.k}),Dn=({x:e,y:t,zoom:n})=>wn.translate(e,t).scale(n),rt=(e,t)=>e.target.closest(`.${t}`),ei=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),eu=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Tn=(e,t=0,n=eu,o=()=>{})=>{const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},ti=e=>{const t=e.ctrlKey&&un()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function tu({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(rt(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(d.ctrlKey&&s){const k=Ce(d),E=ti(d),C=g*Math.pow(2,E);o.scaleTo(n,C,k,d);return}const f=d.deltaMode===1?20:1;let y=r===at.Vertical?0:d.deltaX*f,_=r===at.Horizontal?0:d.deltaY*f;!un()&&d.shiftKey&&r!==at.Vertical&&(y=d.deltaY*f,_=0),o.translateBy(n,-(y/g)*i,-(_/g)*i,{internal:!0});const w=Sn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(d,w)),e.isPanScrolling&&(l?.(d,w),e.panScrollTimeout=setTimeout(()=>{c?.(d,w),e.isPanScrolling=!1},150))}}function nu({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const i=o.type==="wheel",s=!t&&i&&!o.ctrlKey,a=rt(o,e);if(o.ctrlKey&&i&&a&&o.preventDefault(),s||a)return null;o.preventDefault(),n.call(this,o,r)}}function ou({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=Sn(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function ru({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!!(n&&ei(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Sn(i.transform))}}function iu({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&ei(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&$c(e.prevViewport,s.transform))){const a=Sn(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(s.sourceEvent,a)},n?150:0)}}}function su({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c,connectionInProgress:d}){return g=>{const f=e||t,y=n&&g.ctrlKey,_=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(rt(g,`${c}-flow__node`)||rt(g,`${c}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||d&&!_||rt(g,a)&&_||rt(g,l)&&(!_||r&&_&&!e)||!n&&g.ctrlKey&&_)return!1;if(!n&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!f&&!r&&!y&&_||!o&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(o)&&!o.includes(g.button)&&g.type==="mousedown")return!1;const w=Array.isArray(o)&&o.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||_)&&w}}function au({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=e.getBoundingClientRect(),f=sc().clickDistance(!Oe(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),y=Se(e).call(f);T({x:i.x,y:i.y,zoom:dt(i.zoom,t,n)},[[0,0],[g.width,g.height]],r);const _=y.on("wheel.zoom"),w=y.on("dblclick.zoom");f.wheelDelta(ti);function k(m,b){return y?new Promise(h=>{f?.interpolate(b?.interpolate==="linear"?_t:qt).transform(Tn(y,b?.duration,b?.ease,()=>h(!0)),m)}):Promise.resolve(!1)}function E({noWheelClassName:m,noPanClassName:b,onPaneContextMenu:h,userSelectionActive:x,panOnScroll:v,panOnDrag:P,panOnScrollMode:M,panOnScrollSpeed:D,preventScrolling:I,zoomOnPinch:O,zoomOnScroll:X,zoomOnDoubleClick:Y,zoomActivationKeyPressed:B,lib:Z,onTransformChange:q,connectionInProgress:L}){x&&!d.isZoomingOrPanning&&C();const ee=v&&!B&&!x?tu({zoomPanValues:d,noWheelClassName:m,d3Selection:y,d3Zoom:f,panOnScrollMode:M,panOnScrollSpeed:D,zoomOnPinch:O,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):nu({noWheelClassName:m,preventScrolling:I,d3ZoomHandler:_});if(y.on("wheel.zoom",ee,{passive:!1}),!x){const J=ou({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});f.on("start",J);const ie=ru({zoomPanValues:d,panOnDrag:P,onPaneContextMenu:!!h,onPanZoom:s,onTransformChange:q});f.on("zoom",ie);const ne=iu({zoomPanValues:d,panOnDrag:P,panOnScroll:v,onPaneContextMenu:h,onPanZoomEnd:l,onDraggingChange:c});f.on("end",ne)}const ye=su({zoomActivationKeyPressed:B,panOnDrag:P,zoomOnScroll:X,panOnScroll:v,zoomOnDoubleClick:Y,zoomOnPinch:O,userSelectionActive:x,noPanClassName:b,noWheelClassName:m,lib:Z,connectionInProgress:L});f.filter(ye),Y?y.on("dblclick.zoom",w):y.on("dblclick.zoom",null)}function C(){f.on("zoom",null)}async function T(m,b,h){const x=Dn(m),v=f?.constrain()(x,b,h);return v&&await k(v),new Promise(P=>P(v))}async function S(m,b){const h=Dn(m);return await k(h,b),new Promise(x=>x(h))}function H(m){if(y){const b=Dn(m),h=y.property("__zoom");(h.k!==m.zoom||h.x!==m.x||h.y!==m.y)&&f?.transform(y,b,null,{sync:!0})}}function N(){const m=y?Or(y.node()):{x:0,y:0,k:1};return{x:m.x,y:m.y,zoom:m.k}}function z(m,b){return y?new Promise(h=>{f?.interpolate(b?.interpolate==="linear"?_t:qt).scaleTo(Tn(y,b?.duration,b?.ease,()=>h(!0)),m)}):Promise.resolve(!1)}function K(m,b){return y?new Promise(h=>{f?.interpolate(b?.interpolate==="linear"?_t:qt).scaleBy(Tn(y,b?.duration,b?.ease,()=>h(!0)),m)}):Promise.resolve(!1)}function V(m){f?.scaleExtent(m)}function U(m){f?.translateExtent(m)}function Q(m){const b=!Oe(m)||m<0?0:m;f?.clickDistance(b)}return{update:E,destroy:C,setViewport:S,setViewportConstrained:T,getViewport:N,scaleTo:z,scaleBy:K,setScaleExtent:V,setTranslateExtent:U,syncViewport:H,setClickDistance:Q}}var Jo;(function(e){e.Line="line",e.Handle="handle"})(Jo||(Jo={}));var lu=re("<div><!></div>");function dn(e,t){j(t,!0);let n=R(t,"id",3,null),o=R(t,"type",3,"source"),r=R(t,"position",19,()=>W.Top),i=R(t,"isConnectableStart",3,!0),s=R(t,"isConnectableEnd",3,!0),a=Tt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=bt("svelteflow__node_id"),c=bt("svelteflow__node_connectable");let d=p(()=>o()==="target"),g=p(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=Lt(),y=p(()=>f.ariaLabelConfig),_=null;mi(()=>{if(t.onconnect||t.ondisconnect){f.edges;let m=f.connectionLookup.get(`${l}-${o()}${n()?`-${n()}`:""}`);if(_&&!lc(m,_)){const b=m??new Map;Vo(_,b,t.ondisconnect),Vo(b,_,t.onconnect)}_=new Map(m)}});let w=p(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:m,toHandle:b,isValid:h}=f.connection,x=m&&m.nodeId===l&&m.type===o()&&m.id===n(),v=b&&b.nodeId===l&&b.type===o()&&b.id===n(),P=f.connectionMode===ut.Strict?m?.type!==o():l!==m?.nodeId||n()!==m?.id;return[!0,x,v,P,v&&h]}),k=p(()=>Dt(u(w),5)),E=p(()=>u(k)[0]),C=p(()=>u(k)[1]),T=p(()=>u(k)[2]),S=p(()=>u(k)[3]),H=p(()=>u(k)[4]);function N(m){const b=f.onbeforeconnect?f.onbeforeconnect(m):m;b&&(f.addEdge(b),f.onconnect?.(m))}function z(m){const b=Zr(m);m.currentTarget&&(b&&m.button===0||!b)&&Qo.onPointerDown(m,{handleId:n(),nodeId:l,isTarget:u(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:N,onConnectStart:(h,x)=>{f.onconnectstart?.(h,{nodeId:x.nodeId,handleId:x.handleId,handleType:x.handleType})},onConnectEnd:(h,x)=>{f.onconnectend?.(h,x)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:m.currentTarget})}function K(m){if(!l||!f.clickConnectStartHandle&&!i())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(m,{nodeId:l,handleId:n(),handleType:o()}),f.clickConnectStartHandle={nodeId:l,type:o(),id:n()};return}const b=Yr(m.target),h=t.isValidConnection??f.isValidConnection,{connectionMode:x,clickConnectStartHandle:v,flowId:P,nodeLookup:M}=f,{connection:D,isValid:I}=Qo.isValid(m,{handle:{nodeId:l,id:n(),type:o()},connectionMode:x,fromNodeId:v.nodeId,fromHandleId:v.id??null,fromType:v.type,isValidConnection:h,flowId:P,doc:b,lib:"svelte",nodeLookup:M});I&&D&&N(D);const O=structuredClone(ar(f.connection));delete O.inProgress,O.toPosition=O.toHandle?O.toHandle.position:null,f.onclickconnectend?.(m,O),f.clickConnectStartHandle=null}var V=lu(),U=()=>{};Je(V,m=>({"data-handleid":n(),"data-nodeid":l,"data-handlepos":r(),"data-id":`${f.flowId??""}-${l??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,f.noDragClass,f.noPanClass,r(),t.class],onmousedown:z,ontouchstart:z,onclick:f.clickConnect?K:void 0,onkeypress:U,style:t.style,role:"button","aria-label":u(y)["handle.ariaLabel"],tabindex:"-1",...a,[Qn]:m}),[()=>({valid:u(H),connectingto:u(T),connectingfrom:u(C),source:!u(d),target:u(d),connectablestart:i(),connectableend:s(),connectable:u(g),connectionindicator:u(g)&&(!u(E)||u(S))&&(u(E)||f.clickConnectStartHandle?s():i())})]);var Q=le(V);Ye(Q,()=>t.children??At),oe(V),G(e,V),$()}var cu=re("<!> <!>",1);function ni(e,t){j(t,!0);let n=R(t,"targetPosition",19,()=>W.Top),o=R(t,"sourcePosition",19,()=>W.Bottom);var r=cu(),i=de(r);dn(i,{type:"target",get position(){return n()}});var s=ce(i),a=ce(s);dn(a,{type:"source",get position(){return o()}}),ue(()=>Fe(s,` ${t.data?.label??""} `)),G(e,r),$()}var uu=re(" <!>",1);function du(e,t){j(t,!0);let n=R(t,"data",19,()=>({label:"Node"})),o=R(t,"sourcePosition",19,()=>W.Bottom);hn();var r=uu(),i=de(r),s=ce(i);dn(s,{type:"source",get position(){return o()}}),ue(()=>Fe(i,`${n()?.label??""} `)),G(e,r),$()}var fu=re(" <!>",1);function hu(e,t){j(t,!0);let n=R(t,"data",19,()=>({label:"Node"})),o=R(t,"targetPosition",19,()=>W.Top);hn();var r=fu(),i=de(r),s=ce(i);dn(s,{type:"target",get position(){return o()}}),ue(()=>Fe(i,`${n()?.label??""} `)),G(e,r),$()}function gu(e,t){}function In(e,t,n){if(!n||!t)return;const o=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(e)}function yu(e,t){const n=p(Lt),o=p(()=>u(n).domNode);let r;return u(o)?In(e,u(o),t):r=ir(()=>{qe(()=>{In(e,u(o),t),r?.()})}),{async update(i){In(e,u(o),i)},destroy(){e.parentNode&&e.parentNode.removeChild(e),r?.()}}}function mu(){let e=se(typeof window>"u");if(u(e)){const t=ir(()=>{qe(()=>{A(e,!1),t?.()})})}return{get value(){return u(e)}}}const jo=e=>uc(e),pu=e=>Rr(e);function De(e){return e===void 0?void 0:`${e}px`}const fn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var vu=re("<div><!></div>");function wu(e,t){j(t,!0);let n=R(t,"x",3,0),o=R(t,"y",3,0),r=R(t,"selectEdgeOnClick",3,!1),i=R(t,"transparent",3,!1),s=Tt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Lt(),l=bt("svelteflow__edge_id");let c=p(()=>a.visible.edges.get(l)?.zIndex);var d=vu(),g=()=>{r()&&l&&a.handleEdgeSelection(l)};Je(d,y=>({class:["svelte-flow__edge-label",{transparent:i()},t.class],tabindex:"-1",onclick:g,...s,[Jn]:y}),[()=>({display:mu().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:De(t.width),height:De(t.height),"z-index":u(c)})],void 0,"svelte-1wg91mu");var f=le(d);Ye(f,()=>t.children??At),oe(d),pe(d,(y,_)=>yu?.(y,_),()=>"edge-labels"),G(e,d),$()}var xu=Ve("<path></path>"),_u=Ve('<path fill="none"></path><!><!>',1);function En(e,t){let n=R(t,"interactionWidth",3,20),o=Tt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=_u(),i=de(r),s=ce(i);{var a=d=>{var g=xu();Je(g,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),G(d,g)};be(s,d=>{n()>0&&d(a)})}var l=ce(s);{var c=d=>{wu(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(g,f)=>{hn();var y=pi();ue(()=>Fe(y,t.label)),G(g,y)},$$slots:{default:!0}})};be(l,d=>{t.label&&d(c)})}ue(()=>{ae(i,"id",t.id),ae(i,"d",t.path),gn(i,0,jn(["svelte-flow__edge-path",t.class])),ae(i,"marker-start",t.markerStart),ae(i,"marker-end",t.markerEnd),He(i,t.style)}),G(e,r)}function oi(e,t){j(t,!0);let n=p(()=>Fr({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),o=p(()=>Dt(u(n),3)),r=p(()=>u(o)[0]),i=p(()=>u(o)[1]),s=p(()=>u(o)[2]);En(e,{get id(){return t.id},get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),$()}function bu(e,t){j(t,!0);let n=p(()=>fo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=p(()=>Dt(u(n),3)),r=p(()=>u(o)[0]),i=p(()=>u(o)[1]),s=p(()=>u(o)[2]);En(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),$()}function Su(e,t){j(t,!0);let n=p(()=>qr({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),o=p(()=>Dt(u(n),3)),r=p(()=>u(o)[0]),i=p(()=>u(o)[1]),s=p(()=>u(o)[2]);En(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),$()}function Eu(e,t){j(t,!0);let n=p(()=>fo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),o=p(()=>Dt(u(n),3)),r=p(()=>u(o)[0]),i=p(()=>u(o)[1]),s=p(()=>u(o)[2]);En(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),$()}class ku{#e;#t;constructor(t,n){this.#e=t,this.#t=vi(n)}get current(){return this.#t(),this.#e()}}const Nu=/\(.+\)/,Pu=new Set(["all","print","screen","and","or","not","only"]);class Cu extends ku{constructor(t,n){let o=Nu.test(t)||t.split(/[\s,]+/).some(i=>Pu.has(i.trim()))?t:`(${t})`;const r=window.matchMedia(o);super(()=>r.matches,i=>zn(r,"change",i))}}function Mu(e,t,n,o){const r=new Map;return co(e,{x:0,y:0,width:n,height:o},t,!0).forEach(i=>{r.set(i.id,i)}),r}function $o(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:i,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l}=e,c=new Map;for(const d of t){const g=o.get(d.source),f=o.get(d.target);if(!g||!f)continue;if(a){const{visibleNodes:w,transform:k,width:E,height:C}=e;if(Nc({sourceNode:g,targetNode:f,width:E,height:C,transform:k}))w.set(g.id,g),w.set(f.id,f);else continue}const y=r.get(d.id);if(y&&d===y.edge&&g==y.sourceNode&&f==y.targetNode){c.set(d.id,y);continue}const _=Ic({id:d.id,sourceNode:g,targetNode:f,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:i,onError:s});_&&c.set(d.id,{...n,...d,..._,zIndex:kc({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:g,targetNode:f,elevateOnSelect:l}),sourceNode:g,targetNode:f,edge:d})}return c}const ri={input:du,output:hu,default:ni,group:gu},ii={straight:Su,smoothstep:bu,default:oi,step:Eu};function Au(e,t,n,o,r,i){if(t&&!n&&o&&r){const s=xn(i,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return uo(s,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Du(e){class t{#e=p(()=>e.props.id??"1");get flowId(){return u(this.#e)}set flowId(o){A(this.#e,o)}#t=se(null);get domNode(){return u(this.#t)}set domNode(o){A(this.#t,o)}#n=se(null);get panZoom(){return u(this.#n)}set panZoom(o){A(this.#n,o)}#o=se(e.width??0);get width(){return u(this.#o)}set width(o){A(this.#o,o)}#r=se(e.height??0);get height(){return u(this.#r)}set height(o){A(this.#r,o)}#i=p(()=>{const o=Vc(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return u(this.#i)}set nodesInitialized(o){A(this.#i,o)}#s=p(()=>this.panZoom!==null);get viewportInitialized(){return u(this.#s)}set viewportInitialized(o){A(this.#s,o)}#a=p(()=>(Zc(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return u(this.#a)}set _edges(o){A(this.#a,o)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(o){e.nodes=o}get edges(){return this._edges}set edges(o){e.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#l=p(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,i=this.nodes.filter(s=>(s.selected&&(r.add(s.id),this._prevSelectedNodeIds.delete(s.id)),s.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=i),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return u(this.#l)}set selectedNodes(o){A(this.#l,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=p(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,i=this.edges.filter(s=>(s.selected&&(r.add(s.id),this._prevSelectedEdgeIds.delete(s.id)),s.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=i),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return u(this.#c)}set selectedEdges(o){A(this.#c,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=p(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:i,nodeLookup:s,connectionMode:a,onerror:l,onlyRenderVisibleElements:c,defaultEdgeOptions:d}=this;let g,f;const y={edges:r,defaultEdgeOptions:d,previousEdges:i,nodeLookup:s,connectionMode:a,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:l};if(c){const{viewport:_,width:w,height:k}=this,E=[_.x,_.y,_.zoom];g=Mu(s,E,w,k),f=$o({...y,onlyRenderVisible:!0,visibleNodes:g,transform:E,width:w,height:k})}else g=this.nodeLookup,f=$o(y);return{nodes:g,edges:f}});get visible(){return u(this.#u)}set visible(o){A(this.#u,o)}#d=p(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return u(this.#d)}set nodesDraggable(o){A(this.#d,o)}#f=p(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return u(this.#f)}set nodesConnectable(o){A(this.#f,o)}#h=p(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return u(this.#h)}set elementsSelectable(o){A(this.#h,o)}#g=p(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return u(this.#g)}set nodesFocusable(o){A(this.#g,o)}#y=p(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return u(this.#y)}set edgesFocusable(o){A(this.#y,o)}#m=p(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return u(this.#m)}set disableKeyboardA11y(o){A(this.#m,o)}#p=p(()=>e.props.minZoom??.5);get minZoom(){return u(this.#p)}set minZoom(o){A(this.#p,o)}#v=p(()=>e.props.maxZoom??2);get maxZoom(){return u(this.#v)}set maxZoom(o){A(this.#v,o)}#w=p(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return u(this.#w)}set nodeOrigin(o){A(this.#w,o)}#x=p(()=>e.props.nodeExtent??Xn);get nodeExtent(){return u(this.#x)}set nodeExtent(o){A(this.#x,o)}#_=p(()=>e.props.translateExtent??Xn);get translateExtent(){return u(this.#_)}set translateExtent(o){A(this.#_,o)}#b=p(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return u(this.#b)}set defaultEdgeOptions(o){A(this.#b,o)}#S=p(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return u(this.#S)}set nodeDragThreshold(o){A(this.#S,o)}#E=p(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return u(this.#E)}set autoPanOnNodeDrag(o){A(this.#E,o)}#k=p(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return u(this.#k)}set autoPanOnConnect(o){A(this.#k,o)}#N=p(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return u(this.#N)}set autoPanOnNodeFocus(o){A(this.#N,o)}#P=p(()=>e.props.autoPanSpeed??15);get autoPanSpeed(){return u(this.#P)}set autoPanSpeed(o){A(this.#P,o)}#C=p(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return u(this.#C)}set connectionDragThreshold(o){A(this.#C,o)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#M=p(()=>e.props.snapGrid??null);get snapGrid(){return u(this.#M)}set snapGrid(o){A(this.#M,o)}#A=se(!1);get dragging(){return u(this.#A)}set dragging(o){A(this.#A,o)}#D=se(null);get selectionRect(){return u(this.#D)}set selectionRect(o){A(this.#D,o)}#T=se(!1);get selectionKeyPressed(){return u(this.#T)}set selectionKeyPressed(o){A(this.#T,o)}#I=se(!1);get multiselectionKeyPressed(){return u(this.#I)}set multiselectionKeyPressed(o){A(this.#I,o)}#z=se(!1);get deleteKeyPressed(){return u(this.#z)}set deleteKeyPressed(o){A(this.#z,o)}#O=se(!1);get panActivationKeyPressed(){return u(this.#O)}set panActivationKeyPressed(o){A(this.#O,o)}#H=se(!1);get zoomActivationKeyPressed(){return u(this.#H)}set zoomActivationKeyPressed(o){A(this.#H,o)}#R=se(null);get selectionRectMode(){return u(this.#R)}set selectionRectMode(o){A(this.#R,o)}#V=se("");get ariaLiveMessage(){return u(this.#V)}set ariaLiveMessage(o){A(this.#V,o)}#L=p(()=>e.props.selectionMode??sn.Partial);get selectionMode(){return u(this.#L)}set selectionMode(o){A(this.#L,o)}#K=p(()=>({...ri,...e.props.nodeTypes}));get nodeTypes(){return u(this.#K)}set nodeTypes(o){A(this.#K,o)}#B=p(()=>({...ii,...e.props.edgeTypes}));get edgeTypes(){return u(this.#B)}set edgeTypes(o){A(this.#B,o)}#Y=p(()=>e.props.noPanClass??"nopan");get noPanClass(){return u(this.#Y)}set noPanClass(o){A(this.#Y,o)}#X=p(()=>e.props.noDragClass??"nodrag");get noDragClass(){return u(this.#X)}set noDragClass(o){A(this.#X,o)}#Z=p(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return u(this.#Z)}set noWheelClass(o){A(this.#Z,o)}#F=p(()=>bc(e.props.ariaLabelConfig));get ariaLabelConfig(){return u(this.#F)}set ariaLabelConfig(o){A(this.#F,o)}#W=se(Au(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return u(this.#W)}set _viewport(o){A(this.#W,o)}get viewport(){return e.viewport??this._viewport}set viewport(o){e.viewport&&(e.viewport=o),this._viewport=o}#q=se(Zn);get _connection(){return u(this.#q)}set _connection(o){A(this.#q,o)}#G=p(()=>this._connection.inProgress?{...this._connection,to:Vt(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return u(this.#G)}set connection(o){A(this.#G,o)}#U=p(()=>e.props.connectionMode??ut.Strict);get connectionMode(){return u(this.#U)}set connectionMode(o){A(this.#U,o)}#Q=p(()=>e.props.connectionRadius??20);get connectionRadius(){return u(this.#Q)}set connectionRadius(o){A(this.#Q,o)}#J=p(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return u(this.#J)}set isValidConnection(o){A(this.#J,o)}#j=p(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return u(this.#j)}set selectNodesOnDrag(o){A(this.#j,o)}#$=p(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor);get defaultMarkerColor(){return u(this.#$)}set defaultMarkerColor(o){A(this.#$,o)}#ee=p(()=>zc(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return u(this.#ee)}set markers(o){A(this.#ee,o)}#te=p(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return u(this.#te)}set onlyRenderVisibleElements(o){A(this.#te,o)}#ne=p(()=>e.props.onflowerror??pc);get onerror(){return u(this.#ne)}set onerror(o){A(this.#ne,o)}#oe=p(()=>e.props.ondelete);get ondelete(){return u(this.#oe)}set ondelete(o){A(this.#oe,o)}#re=p(()=>e.props.onbeforedelete);get onbeforedelete(){return u(this.#re)}set onbeforedelete(o){A(this.#re,o)}#ie=p(()=>e.props.onbeforeconnect);get onbeforeconnect(){return u(this.#ie)}set onbeforeconnect(o){A(this.#ie,o)}#se=p(()=>e.props.onconnect);get onconnect(){return u(this.#se)}set onconnect(o){A(this.#se,o)}#ae=p(()=>e.props.onconnectstart);get onconnectstart(){return u(this.#ae)}set onconnectstart(o){A(this.#ae,o)}#le=p(()=>e.props.onconnectend);get onconnectend(){return u(this.#le)}set onconnectend(o){A(this.#le,o)}#ce=p(()=>e.props.onbeforereconnect);get onbeforereconnect(){return u(this.#ce)}set onbeforereconnect(o){A(this.#ce,o)}#ue=p(()=>e.props.onreconnect);get onreconnect(){return u(this.#ue)}set onreconnect(o){A(this.#ue,o)}#de=p(()=>e.props.onreconnectstart);get onreconnectstart(){return u(this.#de)}set onreconnectstart(o){A(this.#de,o)}#fe=p(()=>e.props.onreconnectend);get onreconnectend(){return u(this.#fe)}set onreconnectend(o){A(this.#fe,o)}#he=p(()=>e.props.clickConnect??!0);get clickConnect(){return u(this.#he)}set clickConnect(o){A(this.#he,o)}#ge=p(()=>e.props.onclickconnectstart);get onclickconnectstart(){return u(this.#ge)}set onclickconnectstart(o){A(this.#ge,o)}#ye=p(()=>e.props.onclickconnectend);get onclickconnectend(){return u(this.#ye)}set onclickconnectend(o){A(this.#ye,o)}#me=se(null);get clickConnectStartHandle(){return u(this.#me)}set clickConnectStartHandle(o){A(this.#me,o)}#pe=p(()=>e.props.onselectiondrag);get onselectiondrag(){return u(this.#pe)}set onselectiondrag(o){A(this.#pe,o)}#ve=p(()=>e.props.onselectiondragstart);get onselectiondragstart(){return u(this.#ve)}set onselectiondragstart(o){A(this.#ve,o)}#we=p(()=>e.props.onselectiondragstop);get onselectiondragstop(){return u(this.#we)}set onselectiondragstop(o){A(this.#we,o)}resolveFitView=async()=>{this.panZoom&&(await gc({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new Cu("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#xe=p(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return u(this.#xe)}set colorMode(o){A(this.#xe,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Zn,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function Lt(){const e=bt(qn);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const qn=Symbol();function Tu(e){const t=Du(e);function n(m){t.nodeTypes={...ri,...m}}function o(m){t.edgeTypes={...ii,...m}}function r(m){t.edges=Mc(m,t.edges)}const i=(m,b=!1)=>{t.nodes=t.nodes.map(h=>{const x=m.get(h.id);return x?{...h,position:x.position,dragging:b}:h})};function s(m){const{changes:b,updatedInternals:h}=Yc(m,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!h)return;Hc(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const x=new Map;for(const v of b){const P=t.nodeLookup.get(v.id)?.internals.userNode;if(!P)continue;const M={...P};switch(v.type){case"dimensions":{const D={...M.measured,...v.dimensions};v.setAttributes&&(M.width=v.dimensions?.width??M.width,M.height=v.dimensions?.height??M.height),M.measured=D;break}case"position":M.position=v.position??M.position;break}x.set(v.id,M)}t.nodes=t.nodes.map(v=>x.get(v.id)??v)}function a(m){const b=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=m,t.fitViewResolver=b,t.nodes=[...t.nodes],b.promise}async function l(m,b,h){const x=typeof h?.zoom<"u"?h.zoom:t.maxZoom,v=t.panZoom;return v?(await v.setViewport({x:t.width/2-m*x,y:t.height/2-b*x,zoom:x},{duration:h?.duration,ease:h?.ease,interpolate:h?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function c(m,b){const h=t.panZoom;return h?h.scaleBy(m,b):Promise.resolve(!1)}function d(m){return c(1.2,m)}function g(m){return c(1/1.2,m)}function f(m){const b=t.panZoom;b&&(b.setScaleExtent([m,t.maxZoom]),t.minZoom=m)}function y(m){const b=t.panZoom;b&&(b.setScaleExtent([t.minZoom,m]),t.maxZoom=m)}function _(m){const b=t.panZoom;b&&(b.setTranslateExtent(m),t.translateExtent=m)}function w(m){t.panZoom?.setClickDistance(m)}function k(m,b=null){let h=!1;const x=m.map(v=>(b?b.has(v.id):!0)&&v.selected?(h=!0,{...v,selected:!1}):v);return[h,x]}function E(m){const b=m?.nodes?new Set(m.nodes.map(D=>D.id)):null,[h,x]=k(t.nodes,b);h&&(t.nodes=x);const v=m?.edges?new Set(m.edges.map(D=>D.id)):null,[P,M]=k(t.edges,v);P&&(t.edges=M)}function C(m){const b=t.multiselectionKeyPressed;t.nodes=t.nodes.map(h=>{const x=m.includes(h.id),v=b&&h.selected||x;if(h.selected!==v){const P=t.nodeLookup.get(h.id);return P&&(P.selected=v),h.selected=v,{...h}}return h}),b||E({nodes:[]})}function T(m){const b=t.multiselectionKeyPressed;t.edges=t.edges.map(h=>{const x=m.includes(h.id),v=b&&h.selected||x;return h.selected!==v?{...h,selected:v}:h}),b||E({edges:[]})}function S(m,b,h){const x=t.nodeLookup.get(m);if(!x){console.warn("012",Pt.error012(m));return}t.selectionRect=null,t.selectionRectMode=null,x.selected?(b||x.selected&&t.multiselectionKeyPressed)&&(E({nodes:[x],edges:[]}),requestAnimationFrame(()=>h?.blur())):C([m])}function H(m){const b=t.edgeLookup.get(m);if(!b){console.warn("012",Pt.error012(m));return}(b.selectable||t.elementsSelectable&&typeof b.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,b.selected?b.selected&&t.multiselectionKeyPressed&&E({nodes:[],edges:[b]}):T([m]))}function N(m,b){const{nodeExtent:h,snapGrid:x,nodeOrigin:v,nodeLookup:P,nodesDraggable:M,onerror:D}=t,I=new Map,O=x?.[0]??5,X=x?.[1]??5,Y=m.x*O*b,B=m.y*X*b;for(const Z of P.values()){if(!(Z.selected&&(Z.draggable||M&&typeof Z.draggable>"u")))continue;let L={x:Z.internals.positionAbsolute.x+Y,y:Z.internals.positionAbsolute.y+B};x&&(L=Rt(L,x));const{position:F,positionAbsolute:ee}=Vr({nodeId:Z.id,nextPosition:L,nodeLookup:P,nodeExtent:h,nodeOrigin:v,onError:D});Z.position=F,Z.internals.positionAbsolute=ee,I.set(Z.id,Z)}i(I)}function z(m){return Xc({delta:m,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const K=m=>{t._connection={...m}};function V(){t._connection=Zn}function U(){t.resetStoreValues(),E()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:i,updateNodeInternals:s,zoomIn:d,zoomOut:g,fitView:a,setCenter:l,setMinZoom:f,setMaxZoom:y,setTranslateExtent:_,setPaneClickDistance:w,unselectNodesAndEdges:E,addSelectedNodes:C,addSelectedEdges:T,handleNodeSelection:S,handleEdgeSelection:H,moveSelectedNodes:N,panBy:z,updateConnection:K,cancelConnection:V,reset:U})}function Iu(e,t){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:a,translateExtent:l,paneClickDistance:c,setPanZoomInstance:d,onDraggingChange:g,onTransformChange:f}=t,y=au({domNode:e,minZoom:n,maxZoom:o,translateExtent:l,viewport:r,paneClickDistance:c,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:a,onDraggingChange:g}),_=y.getViewport();return(r.x!==_.x||r.y!==_.y||r.zoom!==_.zoom)&&f([_.x,_.y,_.zoom]),d(y),y.update(t),{update(w){y.update(w)}}}var zu=re('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Ou(e,t){j(t,!0);let n=R(t,"store",15),o=p(()=>n().panActivationKeyPressed||t.panOnDrag),r=p(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:i}=n();let s=!1;qe(()=>{!s&&n().viewportInitialized&&(t.oninit?.(),s=!0)});var a=zu(),l=le(a);Ye(l,()=>t.children),oe(a),pe(a,(c,d)=>Iu?.(c,d),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:i,onDraggingChange:c=>{n(n().dragging=c,!0)},setPanZoomInstance:c=>{n(n().panZoom=c,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:u(r),panOnDrag:u(o),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,onTransformChange:c=>{n(n().viewport={x:c[0],y:c[1],zoom:c[2]},!0)},connectionInProgress:n().connection.inProgress})),G(e,a),$()}function er(e,t){return n=>{n.target===t&&e?.(n)}}function tr(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function nr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Hu=re("<div><!></div>");function Ru(e,t){j(t,!0);let n=R(t,"store",15),o=R(t,"panOnDrag",3,!0),r,i=null,s=new Set,a=new Set,l=p(()=>n().panActivationKeyPressed||o()),c=p(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&u(l)!==!0),d=p(()=>n().elementsSelectable&&(u(c)||n().selectionRectMode==="user")),g=!1;function f(N){if(g||n().connection.inProgress){g=!1;return}t.onpaneclick?.({event:N}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function y(N){if(i=r?.getBoundingClientRect(),!n().elementsSelectable||!u(c)||N.button!==0||N.target!==r||!i)return;N.target?.setPointerCapture?.(N.pointerId);const{x:z,y:K}=ke(N,i);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:z,startY:K,x:z,y:K},!0),t.onselectionstart?.(N)}function _(N){if(!u(c)||!i||!n().selectionRect)return;g=!0;const z=ke(N,i),{startX:K=0,startY:V=0}=n().selectionRect,U={...n().selectionRect,x:z.x<K?z.x:K,y:z.y<V?z.y:V,width:Math.abs(z.x-K),height:Math.abs(z.y-V)},Q=s,m=a;s=new Set(co(n().nodeLookup,U,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===sn.Partial,!0).map(h=>h.id));const b=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const h of s){const x=n().connectionLookup.get(h);if(x)for(const{edgeId:v}of x.values()){const P=n().edgeLookup.get(v);P&&(P.selectable??b)&&a.add(v)}}nr(Q,s)||n(n().nodes=n().nodes.map(tr(s)),!0),nr(m,a)||n(n().edges=n().edges.map(tr(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=U,!0)}function w(N){N.button===0&&(N.target?.releasePointerCapture?.(N.pointerId),!u(c)&&n().selectionRectMode==="user"&&N.target===r&&f?.(N),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(g=!1),t.onselectionend?.(N))}const k=N=>{if(Array.isArray(u(l))&&u(l).includes(2)){N.preventDefault();return}t.onpanecontextmenu?.({event:N})};var E=Hu();let C;var T=p(()=>u(d)?void 0:er(f,r));E.__click=function(...N){u(T)?.apply(this,N)},E.__pointerdown=function(...N){(u(d)?y:void 0)?.apply(this,N)},E.__pointermove=function(...N){(u(d)?_:void 0)?.apply(this,N)},E.__pointerup=function(...N){(u(d)?w:void 0)?.apply(this,N)};var S=p(()=>er(k,r));E.__contextmenu=function(...N){u(S)?.apply(this,N)};var H=le(E);Ye(H,()=>t.children),oe(E),It(E,N=>r=N,()=>r),ue(N=>C=gn(E,1,"svelte-flow__pane svelte-flow__container",null,C,N),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:u(c)})]),G(e,E),$()}sr(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Vu=re('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Lu(e,t){j(t,!0);var n=Vu();let o;var r=le(n);Ye(r,()=>t.children),oe(n),ue(i=>o=He(n,"",o,i),[()=>({transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})]),G(e,n),$()}function si(e,t){const{store:n,onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:s}=t,a=qc({onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(c,d){if(d.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}var Ku=re('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),Bu=re('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function Yu(e,t){j(t,!0);var n=Bu(),o=de(n),r=le(o,!0);oe(o);var i=ce(o,2),s=le(i,!0);oe(i);var a=ce(i,2);{var l=c=>{var d=Ku(),g=le(d,!0);oe(d),ue(()=>{ae(d,"id",`${Xu}-${t.store.flowId}`),Fe(g,t.store.ariaLiveMessage)}),G(c,d)};be(a,c=>{t.store.disableKeyboardA11y||c(l)})}ue(()=>{ae(o,"id",`${ai}-${t.store.flowId}`),Fe(r,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ae(i,"id",`${li}-${t.store.flowId}`),Fe(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),G(e,n),$()}const ai="svelte-flow__node-desc",li="svelte-flow__edge-desc",Xu="svelte-flow__aria-live";var Zu=re("<div><!></div>");function Fu(e,t){j(t,!0);let n=R(t,"store",15),o=p(()=>ge(t.node.data,()=>({}),!0)),r=p(()=>ge(t.node.selected,!1)),i=p(()=>t.node.draggable),s=p(()=>t.node.selectable),a=p(()=>ge(t.node.deletable,!0)),l=p(()=>t.node.connectable),c=p(()=>t.node.focusable),d=p(()=>ge(t.node.hidden,!1)),g=p(()=>ge(t.node.dragging,!1)),f=p(()=>ge(t.node.style,"")),y=p(()=>t.node.class),_=p(()=>ge(t.node.type,"default")),w=p(()=>t.node.parentId),k=p(()=>t.node.sourcePosition),E=p(()=>t.node.targetPosition),C=p(()=>ge(t.node.measured,()=>({width:0,height:0}),!0).width),T=p(()=>ge(t.node.measured,()=>({width:0,height:0}),!0).height),S=p(()=>t.node.initialWidth),H=p(()=>t.node.initialHeight),N=p(()=>t.node.width),z=p(()=>t.node.height),K=p(()=>t.node.dragHandle),V=p(()=>ge(t.node.internals.z,0)),U=p(()=>t.node.internals.positionAbsolute.x),Q=p(()=>t.node.internals.positionAbsolute.y),m=p(()=>t.node.internals.userNode),{id:b}=t.node,h=p(()=>u(i)??n().nodesDraggable),x=p(()=>u(s)??n().elementsSelectable),v=p(()=>u(l)??n().nodesConnectable),P=p(()=>xc(t.node)),M=p(()=>!!t.node.internals.handleBounds),D=p(()=>u(P)&&u(M)),I=p(()=>u(c)??n().nodesFocusable);function O(te){return n().parentLookup.has(te)}let X=p(()=>O(b)),Y=se(null),B=null,Z=u(_),q=u(k),L=u(E),F=p(()=>n().nodeTypes[u(_)]??ni),ee=p(()=>n().ariaLabelConfig);Jt("svelteflow__node_connectable",{get value(){return u(v)}}),Jt("svelteflow__node_id",b);let J=p(()=>{const te=u(C)===void 0?u(N)??u(S):u(N),he=u(T)===void 0?u(z)??u(H):u(z);if(!(te===void 0&&he===void 0&&u(f)===void 0))return`${u(f)};${te?`width:${De(te)};`:""}${he?`height:${De(he)};`:""}`});qe(()=>{(u(_)!==Z||u(k)!==q||u(E)!==L)&&u(Y)!==null&&requestAnimationFrame(()=>{u(Y)!==null&&n().updateNodeInternals(new Map([[b,{id:b,nodeElement:u(Y),force:!0}]]))}),Z=u(_),q=u(k),L=u(E)}),qe(()=>{t.resizeObserver&&(!u(D)||u(Y)!==B)&&(B&&t.resizeObserver.unobserve(B),u(Y)&&t.resizeObserver.observe(u(Y)),B=u(Y))}),Gn(()=>{B&&t.resizeObserver?.unobserve(B)});function ie(te){u(x)&&(!n().selectNodesOnDrag||!u(h)||n().nodeDragThreshold>0)&&n().handleNodeSelection(b),t.onnodeclick?.({node:u(m),event:te})}function ne(te){if(!(Xr(te)||n().disableKeyboardA11y))if(Hr.includes(te.key)&&u(x)){const he=te.key==="Escape";n().handleNodeSelection(b,he,u(Y))}else u(h)&&t.node.selected&&Object.prototype.hasOwnProperty.call(fn,te.key)&&(te.preventDefault(),n(n().ariaLiveMessage=u(ee)["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(fn[te.key],te.shiftKey?4:1))}const fe=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!u(Y)?.matches(":focus-visible"))return;const{width:te,height:he,viewport:tt}=n();co(new Map([[b,t.node]]),{x:0,y:0,width:te,height:he},[tt.x,tt.y,tt.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:tt.zoom})};var $e=Be(),gt=de($e);{var et=te=>{var he=Zu();Je(he,(me,Le)=>({"data-id":b,class:["svelte-flow__node",`svelte-flow__node-${u(_)}`,u(y)],style:u(J),onclick:ie,onpointerenter:t.onnodepointerenter?we=>t.onnodepointerenter({node:u(m),event:we}):void 0,onpointerleave:t.onnodepointerleave?we=>t.onnodepointerleave({node:u(m),event:we}):void 0,onpointermove:t.onnodepointermove?we=>t.onnodepointermove({node:u(m),event:we}):void 0,oncontextmenu:t.onnodecontextmenu?we=>t.onnodecontextmenu({node:u(m),event:we}):void 0,onkeydown:u(I)?ne:void 0,onfocus:u(I)?fe:void 0,tabIndex:u(I)?0:void 0,role:t.node.ariaRole??(u(I)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${ai}-${n().flowId}`,...t.node.domAttributes,[Qn]:me,[Jn]:Le}),[()=>({dragging:u(g),selected:u(r),draggable:u(h),connectable:u(v),selectable:u(x),nopan:u(h),parent:u(X)}),()=>({"z-index":u(V),transform:`translate(${u(U)??""}px, ${u(Q)??""}px)`,visibility:u(P)?"visible":"hidden"})]);var tt=le(he);Un(tt,()=>u(F),(me,Le)=>{Le(me,{get data(){return u(o)},get id(){return b},get selected(){return u(r)},get selectable(){return u(x)},get deletable(){return u(a)},get sourcePosition(){return u(k)},get targetPosition(){return u(E)},get zIndex(){return u(V)},get dragging(){return u(g)},get draggable(){return u(h)},get dragHandle(){return u(K)},get parentId(){return u(w)},get type(){return u(_)},get isConnectable(){return u(v)},get positionAbsoluteX(){return u(U)},get positionAbsoluteY(){return u(Q)},get width(){return u(N)},get height(){return u(z)}})}),oe(he),pe(he,(me,Le)=>si?.(me,Le),()=>({nodeId:b,isSelectable:u(x),disabled:!u(h),handleSelector:u(K),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(me,Le,we,yt)=>{t.onnodedrag?.({event:me,targetNode:we,nodes:yt})},onDragStart:(me,Le,we,yt)=>{t.onnodedragstart?.({event:me,targetNode:we,nodes:yt})},onDragStop:(me,Le,we,yt)=>{t.onnodedragstop?.({event:me,targetNode:we,nodes:yt})},store:n()})),It(he,me=>A(Y,me),()=>u(Y)),G(te,he)};be(gt,te=>{u(d)||te(et)})}G(e,$e),$()}var Wu=re('<div class="svelte-flow__nodes"></div>');function qu(e,t){j(t,!0);let n=R(t,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const s=new Map;i.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});Gn(()=>{o?.disconnect()});var r=Wu();$n(r,21,()=>n().visible.nodes.values(),i=>i.id,(i,s)=>{Fu(i,{get node(){return u(s)},get resizeObserver(){return o},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),oe(r),G(e,r),$()}var Gu=Ve('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Uu(e,t){j(t,!0);let n=p(()=>t.edge.source),o=p(()=>t.edge.target),r=p(()=>t.edge.sourceX),i=p(()=>t.edge.sourceY),s=p(()=>t.edge.targetX),a=p(()=>t.edge.targetY),l=p(()=>t.edge.sourcePosition),c=p(()=>t.edge.targetPosition),d=p(()=>ge(t.edge.animated,!1)),g=p(()=>ge(t.edge.selected,!1)),f=p(()=>t.edge.label),y=p(()=>t.edge.labelStyle),_=p(()=>ge(t.edge.data,()=>({}),!0)),w=p(()=>t.edge.style),k=p(()=>t.edge.interactionWidth),E=p(()=>ge(t.edge.type,"default")),C=p(()=>t.edge.sourceHandle),T=p(()=>t.edge.targetHandle),S=p(()=>t.edge.markerStart),H=p(()=>t.edge.markerEnd),N=p(()=>t.edge.selectable),z=p(()=>t.edge.focusable),K=p(()=>ge(t.edge.deletable,!0)),V=p(()=>t.edge.hidden),U=p(()=>t.edge.zIndex),Q=p(()=>t.edge.class),m=p(()=>t.edge.ariaLabel),b=null;const{id:h}=t.edge;Jt("svelteflow__edge_id",h);let x=p(()=>u(N)??t.store.elementsSelectable),v=p(()=>u(z)??t.store.edgesFocusable),P=p(()=>t.store.edgeTypes[u(E)]??oi),M=p(()=>u(S)?`url('#${Wn(u(S),t.store.flowId)}')`:void 0),D=p(()=>u(H)?`url('#${Wn(u(H),t.store.flowId)}')`:void 0);function I(q){const L=t.store.edgeLookup.get(h);L&&(u(x)&&t.store.handleEdgeSelection(h),t.onedgeclick?.({event:q,edge:L}))}function O(q,L){const F=t.store.edgeLookup.get(h);F&&L({event:q,edge:F})}function X(q){if(!t.store.disableKeyboardA11y&&Hr.includes(q.key)&&u(x)){const{unselectNodesAndEdges:L,addSelectedEdges:F}=t.store;q.key==="Escape"?(b?.blur(),L({edges:[t.edge]})):F([h])}}var Y=Be(),B=de(Y);{var Z=q=>{var L=Gu();let F;var ee=le(L);Je(ee,J=>({class:["svelte-flow__edge",u(Q)],"data-id":h,onclick:I,oncontextmenu:t.onedgecontextmenu?ie=>{O(ie,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?ie=>{O(ie,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?ie=>{O(ie,t.onedgepointerleave)}:void 0,"aria-label":u(m)===null?void 0:u(m)?u(m):`Edge from ${u(n)} to ${u(o)}`,"aria-describedby":u(v)?`${li}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(u(v)?"group":"img"),"aria-roledescription":"edge",onkeydown:u(v)?X:void 0,tabindex:u(v)?0:void 0,...t.edge.domAttributes,[Qn]:J}),[()=>({animated:u(d),selected:u(g),selectable:u(x)})]);var ye=le(ee);Un(ye,()=>u(P),(J,ie)=>{ie(J,{get id(){return h},get source(){return u(n)},get target(){return u(o)},get sourceX(){return u(r)},get sourceY(){return u(i)},get targetX(){return u(s)},get targetY(){return u(a)},get sourcePosition(){return u(l)},get targetPosition(){return u(c)},get animated(){return u(d)},get selected(){return u(g)},get label(){return u(f)},get labelStyle(){return u(y)},get data(){return u(_)},get style(){return u(w)},get interactionWidth(){return u(k)},get selectable(){return u(x)},get deletable(){return u(K)},get type(){return u(E)},get sourceHandleId(){return u(C)},get targetHandleId(){return u(T)},get markerStart(){return u(M)},get markerEnd(){return u(D)}})}),oe(ee),It(ee,J=>b=J,()=>b),oe(L),ue(J=>F=He(L,"",F,J),[()=>({"z-index":u(U)})]),G(q,L)};be(B,q=>{u(V)||q(Z)})}G(e,Y),$()}var Qu=Ve("<defs></defs>");function Ju(e,t){j(t,!1);const n=Lt();_i();var o=Qu();$n(o,5,()=>n.markers,r=>r.id,(r,i)=>{td(r,xi(()=>u(i)))}),oe(o),G(e,o),$()}var ju=Ve('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),$u=Ve('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),ed=Ve('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function td(e,t){j(t,!0);let n=R(t,"width",3,12.5),o=R(t,"height",3,12.5),r=R(t,"markerUnits",3,"strokeWidth"),i=R(t,"orient",3,"auto-start-reverse"),s=R(t,"color",3,"none");var a=ed(),l=le(a);{var c=g=>{var f=ju();let y;ue(_=>{ae(f,"stroke-width",t.strokeWidth),y=He(f,"",y,_)},[()=>({stroke:s()})]),G(g,f)},d=g=>{var f=Be(),y=de(f);{var _=w=>{var k=$u();let E;ue(C=>{ae(k,"stroke-width",t.strokeWidth),E=He(k,"",E,C)},[()=>({stroke:s(),fill:s()})]),G(w,k)};be(y,w=>{t.type===an.ArrowClosed&&w(_)},!0)}G(g,f)};be(l,g=>{t.type===an.Arrow?g(c):g(d,!1)})}oe(a),ue(()=>{ae(a,"id",t.id),ae(a,"markerWidth",`${n()}`),ae(a,"markerHeight",`${o()}`),ae(a,"markerUnits",r()),ae(a,"orient",i())}),G(e,a),$()}var nd=re('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function od(e,t){j(t,!0);let n=R(t,"store",15);var o=nd(),r=le(o),i=le(r);Ju(i,{}),oe(r);var s=ce(r,2);$n(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{Uu(a,{get edge(){return u(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),oe(o),G(e,o),$()}var rd=re('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function ci(e,t){j(t,!0);let n=R(t,"x",3,0),o=R(t,"y",3,0),r=R(t,"width",3,0),i=R(t,"height",3,0),s=R(t,"isVisible",3,!0);var a=Be(),l=de(a);{var c=d=>{var g=rd();let f;ue(y=>f=He(g,"",f,y),[()=>({width:typeof r()=="string"?r():De(r()),height:typeof i()=="string"?i():De(i()),transform:`translate(${n()}px, ${o()}px)`})]),G(d,g)};be(l,d=>{s()&&d(c)})}G(e,a),$()}function id(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectioncontextmenu?.({nodes:n,event:e})}function sd(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectionclick?.({nodes:n,event:e})}var ad=re("<div><!></div>");function ld(e,t){j(t,!0);let n=se(void 0);qe(()=>{t.store.disableKeyboardA11y||u(n)?.focus({preventScroll:!0})});let o=p(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,xn(t.store.nodeLookup,{filter:l=>!!l.selected})):null);function r(l){Object.prototype.hasOwnProperty.call(fn,l.key)&&(l.preventDefault(),t.store.moveSelectedNodes(fn[l.key],l.shiftKey?4:1))}var i=Be(),s=de(i);{var a=l=>{var c=ad();c.__contextmenu=[id,t],c.__click=[sd,t],c.__keydown=function(...f){(t.store.disableKeyboardA11y?void 0:r)?.apply(this,f)};let d;var g=le(c);ci(g,{width:"100%",height:"100%",x:0,y:0}),oe(c),pe(c,(f,y)=>si?.(f,y),()=>({disabled:!1,store:t.store,onDrag:(f,y,_,w)=>{t.onnodedrag?.({event:f,targetNode:null,nodes:w})},onDragStart:(f,y,_,w)=>{t.onnodedragstart?.({event:f,targetNode:null,nodes:w})},onDragStop:(f,y,_,w)=>{t.onnodedragstop?.({event:f,targetNode:null,nodes:w})}})),It(c,f=>A(n,f),()=>u(n)),ue(f=>{gn(c,1,jn(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-sf2y5e"),ae(c,"role",t.store.disableKeyboardA11y?void 0:"button"),ae(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),d=He(c,"",d,f)},[()=>({width:De(u(o).width),height:De(u(o).height),transform:`translate(${u(o).x??""}px, ${u(o).y??""}px)`})]),G(l,c)};be(s,l=>{t.store.selectionRectMode==="nodes"&&u(o)&&Oe(u(o).x)&&Oe(u(o).y)&&l(a)})}G(e,i),$()}sr(["contextmenu","click","keydown"]);function cd(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Pe(e,t){let{enabled:n=!0,trigger:o,type:r="keydown"}=t;function i(a){const l=Array.isArray(o)?o:[o],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((d,g,f)=>g?d|1<<f:d,0);for(const d of l){const g={preventDefault:!1,enabled:!0,...d},{modifier:f,key:y,callback:_,preventDefault:w,enabled:k}=g;if(k){if(a.key!==y)continue;if(f===null||f===!1){if(c!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const C=Array.isArray(f)?f:[f];let T=!1;for(const S of C)if((Array.isArray(S)?S:[S]).reduce((N,z)=>N|cd(z),0)===c){T=!0;break}if(!T)continue}w&&a.preventDefault();const E={node:e,trigger:g,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:E})),_?.(E)}}}let s;return n&&(s=zn(e,r,i)),{update:a=>{const{enabled:l=!0,type:c="keydown"}=a;n&&(!l||r!==c)?s?.():!n&&l&&(s=zn(e,c,i)),n=l,r=c,o=a.trigger},destroy:()=>{s?.()}}}function ud(){const e=p(Lt),t=i=>{const s=jo(i)?i:u(e).nodeLookup.get(i.id),a=s.parentId?_c(s.position,s.measured,s.parentId,u(e).nodeLookup,u(e).nodeOrigin):s.position,l={...s,position:a,width:s.measured?.width??s.width,height:s.measured?.height??s.height};return ft(l)};function n(i,s,a={replace:!1}){u(e).nodes=Xe(()=>u(e).nodes).map(l=>{if(l.id===i){const c=typeof s=="function"?s(l):s;return a?.replace&&jo(c)?c:{...l,...c}}return l})}function o(i,s,a={replace:!1}){u(e).edges=Xe(()=>u(e).edges).map(l=>{if(l.id===i){const c=typeof s=="function"?s(l):s;return a.replace&&pu(c)?c:{...l,...c}}return l})}const r=i=>u(e).nodeLookup.get(i);return{zoomIn:u(e).zoomIn,zoomOut:u(e).zoomOut,getInternalNode:r,getNode:i=>r(i)?.internals.userNode,getNodes:i=>i===void 0?u(e).nodes:or(u(e).nodeLookup,i),getEdge:i=>u(e).edgeLookup.get(i),getEdges:i=>i===void 0?u(e).edges:or(u(e).edgeLookup,i),setZoom:(i,s)=>{const a=u(e).panZoom;return a?a.scaleTo(i,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>u(e).viewport.zoom,setViewport:async(i,s)=>{const a=u(e).viewport;return u(e).panZoom?(await u(e).panZoom.setViewport({x:i.x??a.x,y:i.y??a.y,zoom:i.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>ar(u(e).viewport),setCenter:async(i,s,a)=>u(e).setCenter(i,s,a),fitView:i=>u(e).fitView(i),fitBounds:async(i,s)=>{if(!u(e).panZoom)return Promise.resolve(!1);const a=uo(i,u(e).width,u(e).height,u(e).minZoom,u(e).maxZoom,s?.padding??.1);return await u(e).panZoom.setViewport(a,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(i,s=!0,a)=>{const l=Ko(i),c=l?i:t(i);return c?(a||u(e).nodes).filter(d=>{const g=u(e).nodeLookup.get(d.id);if(!g||!l&&d.id===i.id)return!1;const f=ft(g),y=Ct(f,c);return s&&y>0||y>=f.width*f.height||y>=c.width*c.height}):[]},isNodeIntersecting:(i,s,a=!0)=>{const c=Ko(i)?i:t(i);if(!c)return!1;const d=Ct(c,s);return a&&d>0||d>=s.width*s.height||d>=c.width*c.height},deleteElements:async({nodes:i=[],edges:s=[]})=>{const{nodes:a,edges:l}=await yc({nodesToRemove:i,edgesToRemove:s,nodes:u(e).nodes,edges:u(e).edges,onBeforeDelete:u(e).onbeforedelete});return a&&(u(e).nodes=Xe(()=>u(e).nodes).filter(c=>!a.some(({id:d})=>d===c.id))),l&&(u(e).edges=Xe(()=>u(e).edges).filter(c=>!l.some(({id:d})=>d===c.id))),(a.length>0||l.length>0)&&u(e).ondelete?.({nodes:a,edges:l}),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(i,s={snapToGrid:!0})=>{if(!u(e).domNode)return i;const a=s.snapToGrid?u(e).snapGrid:!1,{x:l,y:c,zoom:d}=u(e).viewport,{x:g,y:f}=u(e).domNode.getBoundingClientRect(),y={x:i.x-g,y:i.y-f};return Vt(y,[l,c,d],a!==null,a||[1,1])},flowToScreenPosition:i=>{if(!u(e).domNode)return i;const{x:s,y:a,zoom:l}=u(e).viewport,{x:c,y:d}=u(e).domNode.getBoundingClientRect(),g=cn(i,[s,a,l]);return{x:g.x+c,y:g.y+d}},toObject:()=>structuredClone({nodes:[...u(e).nodes],edges:[...u(e).edges],viewport:{...u(e).viewport}}),updateNode:n,updateNodeData:(i,s,a)=>{const l=u(e).nodeLookup.get(i)?.internals.userNode;if(!l)return;const c=typeof s=="function"?s(l):s;n(i,d=>({...d,data:a?.replace?c:{...d.data,...c}}))},updateEdge:o,getNodesBounds:i=>dc(i,{nodeLookup:u(e).nodeLookup,nodeOrigin:u(e).nodeOrigin}),getHandleConnections:({type:i,id:s,nodeId:a})=>Array.from(u(e).connectionLookup.get(`${a}-${i}-${s??null}`)?.values()??[])}}function or(e,t){const n=[];for(const o of t){const r=e.get(o);if(r){const i="internals"in r?r.internals?.userNode:r;n.push(i)}}return n}function dd(e,t){j(t,!0);let n=R(t,"store",15),o=R(t,"selectionKey",3,"Shift"),r=R(t,"multiSelectionKey",19,()=>un()?"Meta":"Control"),i=R(t,"deleteKey",3,"Backspace"),s=R(t,"panActivationKey",3," "),a=R(t,"zoomActivationKey",19,()=>un()?"Meta":"Control"),{deleteElements:l}=ud();function c(w){return w!==null&&typeof w=="object"}function d(w){return c(w)?w.modifier||[]:[]}function g(w){return w==null?"":c(w)?w.key:w}function f(w,k){return(Array.isArray(w)?w:[w]).map(C=>{const T=g(C);return{key:T,modifier:d(C),enabled:T!==null,callback:k}})}function y(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function _(){const w=n().nodes.filter(E=>E.selected),k=n().edges.filter(E=>E.selected);l({nodes:w,edges:k})}mo("blur",_e,y),mo("contextmenu",_e,y),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(i(),w=>{!(w.originalEvent.ctrlKey||w.originalEvent.metaKey||w.originalEvent.shiftKey)&&!Xr(w.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),_())}),type:"keydown"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(i(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),pe(_e,(w,k)=>Pe?.(w,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),$()}var fd=Ve('<path fill="none" class="svelte-flow__connection-path"></path>'),hd=Ve('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function gd(e,t){j(t,!0);let n=p(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Ke.Bezier:{const[a]=Fr(s);return a}case Ke.Straight:{const[a]=qr(s);return a}case Ke.Step:case Ke.SmoothStep:{const[a]=fo({...s,borderRadius:t.type===Ke.Step?0:void 0});return a}}});var o=Be(),r=de(o);{var i=s=>{var a=hd(),l=le(a),c=le(l);{var d=f=>{var y=Be(),_=de(y);Un(_,()=>t.LineComponent,(w,k)=>{k(w,{})}),G(f,y)},g=f=>{var y=fd();ue(()=>{ae(y,"d",u(n)),He(y,t.style)}),G(f,y)};be(c,f=>{t.LineComponent?f(d):f(g,!1)})}oe(l),oe(a),ue(f=>{ae(a,"width",t.store.width),ae(a,"height",t.store.height),He(a,t.containerStyle),gn(l,0,f)},[()=>jn(["svelte-flow__connection",cc(t.store.connection.isValid)])]),G(s,a)};be(r,s=>{t.store.connection.inProgress&&s(i)})}G(e,o),$()}var yd=re("<div><!></div>");function md(e,t){j(t,!0);let n=R(t,"position",3,"top-right"),o=Tt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),r=p(()=>`${n()}`.split("-"));var i=yd();Je(i,a=>({class:a,style:t.style,...o}),[()=>["svelte-flow__panel",t.class,...u(r)]]);var s=le(i);Ye(s,()=>t.children??At),oe(i),G(e,i),$()}var pd=re('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function vd(e,t){j(t,!0);let n=R(t,"position",3,"bottom-right");var o=Be(),r=de(o);{var i=s=>{md(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var c=pd();G(a,c)},$$slots:{default:!0}})};be(r,s=>{t.proOptions?.hideAttribution||s(i)})}G(e,o),$()}var wd=re("<div><!></div>");function xd(e,t){j(t,!0);let n=R(t,"domNode",15),o=R(t,"clientWidth",15),r=R(t,"clientHeight",15),i=p(()=>t.rest.class),s=p(()=>wi(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed"]));function a(d){d.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(d)}var l=wd();Je(l,d=>({class:["svelte-flow","svelte-flow__container",u(i),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...u(s),[Jn]:d}),[()=>({width:De(t.width),height:De(t.height)})],void 0,"svelte-mkap6j");var c=le(l);Ye(c,()=>t.children??At),oe(l),It(l,d=>n(d),()=>n()),wo(l,"clientHeight",r),wo(l,"clientWidth",o),G(e,l),$()}var _d=re('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),bd=re("<!> <!>",1),Sd=re("<!> <!> <!> <!> <!>",1);function Td(e,t){j(t,!0);let n=R(t,"paneClickDistance",3,1),o=R(t,"nodeClickDistance",3,1),r=R(t,"panOnScrollMode",19,()=>at.Free),i=R(t,"preventScrolling",3,!0),s=R(t,"zoomOnScroll",3,!0),a=R(t,"zoomOnDoubleClick",3,!0),l=R(t,"zoomOnPinch",3,!0),c=R(t,"panOnScroll",3,!1),d=R(t,"panOnScrollSpeed",3,.5),g=R(t,"panOnDrag",3,!0),f=R(t,"selectionOnDrag",3,!0),y=R(t,"connectionLineType",19,()=>Ke.Bezier),_=R(t,"nodes",31,()=>po([])),w=R(t,"edges",31,()=>po([])),k=R(t,"viewport",15,void 0),E=Tt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),C=Tu({props:E,width:t.width,height:t.height,get nodes(){return _()},set nodes(S){_(S)},get edges(){return w()},set edges(S){w(S)},get viewport(){return k()},set viewport(S){k(S)}});const T=bt(qn);T&&T.setStore&&T.setStore(C),Jt(qn,{provider:!1,getStore(){return C}}),qe(()=>{const S={nodes:C.selectedNodes,edges:C.selectedEdges};Xe(()=>t.onselectionchange)?.(S);for(const H of C.selectionChangeHandlers.values())H(S)}),Gn(()=>{C.reset()}),xd(e,{get colorMode(){return C.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return E},get domNode(){return C.domNode},set domNode(S){C.domNode=S},get clientWidth(){return C.width},set clientWidth(S){C.width=S},get clientHeight(){return C.height},set clientHeight(S){C.height=S},children:(S,H)=>{var N=Sd(),z=de(N);dd(z,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return C},set store(m){C=m}});var K=ce(z,2);Ou(K,{get panOnScrollMode(){return r()},get preventScrolling(){return i()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return c()},get panOnScrollSpeed(){return d()},get panOnDrag(){return g()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return C},set store(m){C=m},children:(m,b)=>{Ru(m,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return g()},get selectionOnDrag(){return f()},get store(){return C},set store(h){C=h},children:(h,x)=>{var v=bd(),P=de(v);Lu(P,{get store(){return C},set store(D){C=D},children:(D,I)=>{var O=_d(),X=ce(de(O),2);od(X,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return C},set store(q){C=q}});var Y=ce(X,4);gd(Y,{get type(){return y()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return C},set store(q){C=q}});var B=ce(Y,2);qu(B,{get nodeClickDistance(){return o()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(q){C=q}});var Z=ce(B,2);ld(Z,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(q){C=q}}),hn(2),G(D,O)},$$slots:{default:!0}});var M=ce(P,2);{let D=p(()=>!!(C.selectionRect&&C.selectionRectMode==="user")),I=p(()=>C.selectionRect?.width),O=p(()=>C.selectionRect?.height),X=p(()=>C.selectionRect?.x),Y=p(()=>C.selectionRect?.y);ci(M,{get isVisible(){return u(D)},get width(){return u(I)},get height(){return u(O)},get x(){return u(X)},get y(){return u(Y)}})}G(h,v)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=ce(K,2);vd(V,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var U=ce(V,2);Yu(U,{get store(){return C}});var Q=ce(U,2);Ye(Q,()=>t.children??At),G(S,N)},$$slots:{default:!0}}),$()}export{En as B,dn as H,W as P,Td as S,md as a,Fr as g,Lt as u};
